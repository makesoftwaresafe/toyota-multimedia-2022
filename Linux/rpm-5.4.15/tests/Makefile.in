# Makefile.in generated by automake 1.14.1 from Makefile.am.
# @configure_input@

# Copyright (C) 1994-2013 Free Software Foundation, Inc.

# This Makefile.in is free software; the Free Software Foundation
# gives unlimited permission to copy and/or distribute it,
# with or without modifications, as long as this notice is preserved.

# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY, to the extent permitted by law; without
# even the implied warranty of MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE.

@SET_MAKE@

VPATH = @srcdir@
am__is_gnu_make = test -n '$(MAKEFILE_LIST)' && test -n '$(MAKELEVEL)'
am__make_running_with_option = \
  case $${target_option-} in \
      ?) ;; \
      *) echo "am__make_running_with_option: internal error: invalid" \
              "target option '$${target_option-}' specified" >&2; \
         exit 1;; \
  esac; \
  has_opt=no; \
  sane_makeflags=$$MAKEFLAGS; \
  if $(am__is_gnu_make); then \
    sane_makeflags=$$MFLAGS; \
  else \
    case $$MAKEFLAGS in \
      *\\[\ \	]*) \
        bs=\\; \
        sane_makeflags=`printf '%s\n' "$$MAKEFLAGS" \
          | sed "s/$$bs$$bs[$$bs $$bs	]*//g"`;; \
    esac; \
  fi; \
  skip_next=no; \
  strip_trailopt () \
  { \
    flg=`printf '%s\n' "$$flg" | sed "s/$$1.*$$//"`; \
  }; \
  for flg in $$sane_makeflags; do \
    test $$skip_next = yes && { skip_next=no; continue; }; \
    case $$flg in \
      *=*|--*) continue;; \
        -*I) strip_trailopt 'I'; skip_next=yes;; \
      -*I?*) strip_trailopt 'I';; \
        -*O) strip_trailopt 'O'; skip_next=yes;; \
      -*O?*) strip_trailopt 'O';; \
        -*l) strip_trailopt 'l'; skip_next=yes;; \
      -*l?*) strip_trailopt 'l';; \
      -[dEDm]) skip_next=yes;; \
      -[JT]) skip_next=yes;; \
    esac; \
    case $$flg in \
      *$$target_option*) has_opt=yes; break;; \
    esac; \
  done; \
  test $$has_opt = yes
am__make_dryrun = (target_option=n; $(am__make_running_with_option))
am__make_keepgoing = (target_option=k; $(am__make_running_with_option))
pkgdatadir = $(datadir)/@PACKAGE@
pkgincludedir = $(includedir)/@PACKAGE@
pkglibdir = $(libdir)/@PACKAGE@
pkglibexecdir = $(libexecdir)/@PACKAGE@
am__cd = CDPATH="$${ZSH_VERSION+.}$(PATH_SEPARATOR)" && cd
install_sh_DATA = $(install_sh) -c -m 644
install_sh_PROGRAM = $(install_sh) -c
install_sh_SCRIPT = $(install_sh) -c
INSTALL_HEADER = $(INSTALL_DATA)
transform = $(program_transform_name)
NORMAL_INSTALL = :
PRE_INSTALL = :
POST_INSTALL = :
NORMAL_UNINSTALL = :
PRE_UNINSTALL = :
POST_UNINSTALL = :
build_triplet = @build@
host_triplet = @host@
target_triplet = @target@
EXTRA_PROGRAMS = tkey$(EXEEXT) tecdsa$(EXEEXT) thkp$(EXEEXT) \
	tpgp$(EXEEXT) trsa$(EXEEXT) tssl$(EXEEXT)
noinst_PROGRAMS =
subdir = tests
DIST_COMMON = $(srcdir)/Makefile.in $(srcdir)/Makefile.am \
	$(top_srcdir)/mkinstalldirs $(srcdir)/macros.in \
	$(top_srcdir)/depcomp
ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
am__aclocal_m4_deps = $(top_srcdir)/m4/gettext.m4 \
	$(top_srcdir)/m4/iconv.m4 $(top_srcdir)/m4/intlmacosx.m4 \
	$(top_srcdir)/m4/lib-ld.m4 $(top_srcdir)/m4/lib-link.m4 \
	$(top_srcdir)/m4/lib-prefix.m4 $(top_srcdir)/m4/libtool.m4 \
	$(top_srcdir)/m4/ltoptions.m4 $(top_srcdir)/m4/ltsugar.m4 \
	$(top_srcdir)/m4/ltversion.m4 $(top_srcdir)/m4/lt~obsolete.m4 \
	$(top_srcdir)/m4/nls.m4 $(top_srcdir)/m4/po.m4 \
	$(top_srcdir)/m4/progtest.m4 $(top_srcdir)/acinclude.m4 \
	$(top_srcdir)/configure.ac
am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \
	$(ACLOCAL_M4)
mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
CONFIG_HEADER = $(top_builddir)/config.h
CONFIG_CLEAN_FILES = macros
CONFIG_CLEAN_VPATH_FILES =
PROGRAMS = $(noinst_PROGRAMS)
am_tecdsa_OBJECTS = tecdsa.$(OBJEXT)
tecdsa_OBJECTS = $(am_tecdsa_OBJECTS)
am__DEPENDENCIES_1 = $(top_builddir)/rpmio/librpmio.la \
	$(top_builddir)/misc/librpmmisc.la
tecdsa_DEPENDENCIES = $(am__DEPENDENCIES_1)
AM_V_lt = $(am__v_lt_@AM_V@)
am__v_lt_ = $(am__v_lt_@AM_DEFAULT_V@)
am__v_lt_0 = --silent
am__v_lt_1 = 
am_thkp_OBJECTS = thkp.$(OBJEXT)
thkp_OBJECTS = $(am_thkp_OBJECTS)
thkp_DEPENDENCIES = $(am__DEPENDENCIES_1)
am_tkey_OBJECTS = tkey.$(OBJEXT)
tkey_OBJECTS = $(am_tkey_OBJECTS)
am__DEPENDENCIES_2 = $(top_builddir)/rpmdb/librpmdb.la \
	$(am__DEPENDENCIES_1)
am__DEPENDENCIES_3 = $(top_builddir)/build/librpmbuild.la \
	$(top_builddir)/lib/librpm.la $(am__DEPENDENCIES_2)
tkey_DEPENDENCIES = $(am__DEPENDENCIES_3)
am_tpgp_OBJECTS = tpgp.$(OBJEXT)
tpgp_OBJECTS = $(am_tpgp_OBJECTS)
tpgp_DEPENDENCIES = $(am__DEPENDENCIES_3)
am_trsa_OBJECTS = trsa.$(OBJEXT)
trsa_OBJECTS = $(am_trsa_OBJECTS)
trsa_DEPENDENCIES = $(am__DEPENDENCIES_1)
am_tssl_OBJECTS = tssl.$(OBJEXT)
tssl_OBJECTS = $(am_tssl_OBJECTS)
tssl_DEPENDENCIES = $(am__DEPENDENCIES_3)
AM_V_P = $(am__v_P_@AM_V@)
am__v_P_ = $(am__v_P_@AM_DEFAULT_V@)
am__v_P_0 = false
am__v_P_1 = :
AM_V_GEN = $(am__v_GEN_@AM_V@)
am__v_GEN_ = $(am__v_GEN_@AM_DEFAULT_V@)
am__v_GEN_0 = @echo "  GEN     " $@;
am__v_GEN_1 = 
AM_V_at = $(am__v_at_@AM_V@)
am__v_at_ = $(am__v_at_@AM_DEFAULT_V@)
am__v_at_0 = @
am__v_at_1 = 
DEFAULT_INCLUDES = -I.@am__isrc@ -I$(top_builddir)
depcomp = $(SHELL) $(top_srcdir)/depcomp
am__depfiles_maybe = depfiles
am__mv = mv -f
COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) \
	$(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
LTCOMPILE = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) \
	$(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) \
	$(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) \
	$(AM_CFLAGS) $(CFLAGS)
AM_V_CC = $(am__v_CC_@AM_V@)
am__v_CC_ = $(am__v_CC_@AM_DEFAULT_V@)
am__v_CC_0 = @echo "  CC      " $@;
am__v_CC_1 = 
CCLD = $(CC)
LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) \
	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
	$(AM_LDFLAGS) $(LDFLAGS) -o $@
AM_V_CCLD = $(am__v_CCLD_@AM_V@)
am__v_CCLD_ = $(am__v_CCLD_@AM_DEFAULT_V@)
am__v_CCLD_0 = @echo "  CCLD    " $@;
am__v_CCLD_1 = 
SOURCES = $(tecdsa_SOURCES) $(thkp_SOURCES) $(tkey_SOURCES) \
	$(tpgp_SOURCES) $(trsa_SOURCES) $(tssl_SOURCES)
DIST_SOURCES = $(tecdsa_SOURCES) $(thkp_SOURCES) $(tkey_SOURCES) \
	$(tpgp_SOURCES) $(trsa_SOURCES) $(tssl_SOURCES)
RECURSIVE_TARGETS = all-recursive check-recursive cscopelist-recursive \
	ctags-recursive dvi-recursive html-recursive info-recursive \
	install-data-recursive install-dvi-recursive \
	install-exec-recursive install-html-recursive \
	install-info-recursive install-pdf-recursive \
	install-ps-recursive install-recursive installcheck-recursive \
	installdirs-recursive pdf-recursive ps-recursive \
	tags-recursive uninstall-recursive
am__can_run_installinfo = \
  case $$AM_UPDATE_INFO_DIR in \
    n|no|NO) false;; \
    *) (install-info --version) >/dev/null 2>&1;; \
  esac
RECURSIVE_CLEAN_TARGETS = mostlyclean-recursive clean-recursive	\
  distclean-recursive maintainer-clean-recursive
am__recursive_targets = \
  $(RECURSIVE_TARGETS) \
  $(RECURSIVE_CLEAN_TARGETS) \
  $(am__extra_recursive_targets)
AM_RECURSIVE_TARGETS = $(am__recursive_targets:-recursive=) TAGS CTAGS \
	distdir
am__tagged_files = $(HEADERS) $(SOURCES) $(TAGS_FILES) $(LISP)
# Read a list of newline-separated strings from the standard input,
# and print each of them once, without duplicates.  Input order is
# *not* preserved.
am__uniquify_input = $(AWK) '\
  BEGIN { nonempty = 0; } \
  { items[$$0] = 1; nonempty = 1; } \
  END { if (nonempty) { for (i in items) print i; }; } \
'
# Make sure the list of sources is unique.  This is necessary because,
# e.g., the same source file might be shared among _SOURCES variables
# for different programs/libraries.
am__define_uniq_tagged_files = \
  list='$(am__tagged_files)'; \
  unique=`for i in $$list; do \
    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
  done | $(am__uniquify_input)`
ETAGS = etags
CTAGS = ctags
DIST_SUBDIRS = $(SUBDIRS)
DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
am__relativize = \
  dir0=`pwd`; \
  sed_first='s,^\([^/]*\)/.*$$,\1,'; \
  sed_rest='s,^[^/]*/*,,'; \
  sed_last='s,^.*/\([^/]*\)$$,\1,'; \
  sed_butlast='s,/*[^/]*$$,,'; \
  while test -n "$$dir1"; do \
    first=`echo "$$dir1" | sed -e "$$sed_first"`; \
    if test "$$first" != "."; then \
      if test "$$first" = ".."; then \
        dir2=`echo "$$dir0" | sed -e "$$sed_last"`/"$$dir2"; \
        dir0=`echo "$$dir0" | sed -e "$$sed_butlast"`; \
      else \
        first2=`echo "$$dir2" | sed -e "$$sed_first"`; \
        if test "$$first2" = "$$first"; then \
          dir2=`echo "$$dir2" | sed -e "$$sed_rest"`; \
        else \
          dir2="../$$dir2"; \
        fi; \
        dir0="$$dir0"/"$$first"; \
      fi; \
    fi; \
    dir1=`echo "$$dir1" | sed -e "$$sed_rest"`; \
  done; \
  reldir="$$dir2"
ABI_COMPLIANCE_CHECKER = @ABI_COMPLIANCE_CHECKER@
ACLOCAL = @ACLOCAL@
ALLOCA = @ALLOCA@
AMTAR = @AMTAR@
AM_DEFAULT_VERBOSITY = @AM_DEFAULT_VERBOSITY@
API_SANITY_CHECKER = @API_SANITY_CHECKER@
AR = @AR@
AS = @AS@
AUTOCONF = @AUTOCONF@
AUTOHEADER = @AUTOHEADER@
AUTOMAKE = @AUTOMAKE@
AWK = @AWK@
BUILDROOTDIR_MACRO = @BUILDROOTDIR_MACRO@
CC = @CC@
CCDEPMODE = @CCDEPMODE@
CFLAGS = @CFLAGS@
CPP = @CPP@
CPPFLAGS = @CPPFLAGS@
CXX = @CXX@
CXXCPP = @CXXCPP@
CXXDEPMODE = @CXXDEPMODE@
CXXFLAGS = @CXXFLAGS@
CYGPATH_W = @CYGPATH_W@
DBAPI = @DBAPI@
DBLIBOBJS = @DBLIBOBJS@
DBLIBSRCS = @DBLIBSRCS@
DBPATH = @DBPATH@
DBPATH_MACRO = @DBPATH_MACRO@
DEFS = @DEFS@
DEPDIR = @DEPDIR@
DISTRO_MACROS = @DISTRO_MACROS@
DLLTOOL = @DLLTOOL@
DSYMUTIL = @DSYMUTIL@
DUMPBIN = @DUMPBIN@
ECHO_C = @ECHO_C@
ECHO_N = @ECHO_N@
ECHO_T = @ECHO_T@
EGREP = @EGREP@
EXEEXT = @EXEEXT@
FGREP = @FGREP@
FIXPERMS = @FIXPERMS@
GETTEXT_MACRO_VERSION = @GETTEXT_MACRO_VERSION@
GMSGFMT = @GMSGFMT@
GMSGFMT_015 = @GMSGFMT_015@
GPSEE_MODULES_PATH = @GPSEE_MODULES_PATH@
GREP = @GREP@
INSTALL = @INSTALL@
INSTALL_DATA = @INSTALL_DATA@
INSTALL_PROGRAM = @INSTALL_PROGRAM@
INSTALL_SCRIPT = @INSTALL_SCRIPT@
INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
INTLLIBS = @INTLLIBS@
INTL_MACOSX_LIBS = @INTL_MACOSX_LIBS@
JAVA = @JAVA@
JAVAC = @JAVAC@
LD = @LD@
LDFLAGS = @LDFLAGS@
LDFLAGS_STATIC = @LDFLAGS_STATIC@
LD_VERSION_SCRIPT_FLAG = @LD_VERSION_SCRIPT_FLAG@
LIBICONV = @LIBICONV@
LIBINTL = @LIBINTL@
LIBOBJS = @LIBOBJS@
LIBS = @LIBS@
LIBTOOL = @LIBTOOL@
LIBTOOLIZE = @LIBTOOLIZE@
LIPO = @LIPO@
LN_S = @LN_S@
LOCALEDIR = @LOCALEDIR@
LTLIBICONV = @LTLIBICONV@
LTLIBINTL = @LTLIBINTL@
LTLIBOBJS = @LTLIBOBJS@
LT_AGE = @LT_AGE@
LT_CURRENT = @LT_CURRENT@
LT_REVISION = @LT_REVISION@
MACROFILES = @MACROFILES@
MAGIC_MACRO = @MAGIC_MACRO@
MAINT = @MAINT@
MAKEINFO = @MAKEINFO@
MANIFEST_TOOL = @MANIFEST_TOOL@
MKDIR = @MKDIR@
MKDIR_P = @MKDIR_P@
MSGFMT = @MSGFMT@
MSGFMT_015 = @MSGFMT_015@
MSGMERGE = @MSGMERGE@
NCPUS_COMMAND = @NCPUS_COMMAND@
NM = @NM@
NMEDIT = @NMEDIT@
OBJDUMP = @OBJDUMP@
OBJEXT = @OBJEXT@
OPENMP_CFLAGS = @OPENMP_CFLAGS@
OPENMP_CXXFLAGS = @OPENMP_CXXFLAGS@
OTOOL = @OTOOL@
OTOOL64 = @OTOOL64@
PACKAGE = @PACKAGE@
PACKAGE_BUGREPORT = @PACKAGE_BUGREPORT@
PACKAGE_NAME = @PACKAGE_NAME@
PACKAGE_STRING = @PACKAGE_STRING@
PACKAGE_TARNAME = @PACKAGE_TARNAME@
PACKAGE_URL = @PACKAGE_URL@
PACKAGE_VERSION = @PACKAGE_VERSION@
PATH_SEPARATOR = @PATH_SEPARATOR@
PERL = @PERL@
PERL_INSTALLDIRS = @PERL_INSTALLDIRS@
PERL_URPM_INSTALLDIRS = @PERL_URPM_INSTALLDIRS@
PKGSRCDIR = @PKGSRCDIR@
PKGSRCDIR_MACRO = @PKGSRCDIR_MACRO@
POSUB = @POSUB@
PYTHON = @PYTHON@
PYTHON_EXEC_PREFIX = @PYTHON_EXEC_PREFIX@
PYTHON_PREFIX = @PYTHON_PREFIX@
PYTHON_VERSION = @PYTHON_VERSION@
RANLIB = @RANLIB@
ROOT_GROUP = @ROOT_GROUP@
RPMCANONARCH = @RPMCANONARCH@
RPMCANONCOLOR = @RPMCANONCOLOR@
RPMCANONGNU = @RPMCANONGNU@
RPMCANONOS = @RPMCANONOS@
RPMCANONVENDOR = @RPMCANONVENDOR@
RPMGID = @RPMGID@
RPMGROUP = @RPMGROUP@
RPMLUAFILES = @RPMLUAFILES@
RPMPOPTFILES = @RPMPOPTFILES@
RPMUID = @RPMUID@
RPMUSER = @RPMUSER@
RPM_TIMESTAMP = @RPM_TIMESTAMP@
RPM_VENDOR = @RPM_VENDOR@
RPM_VERSION = @RPM_VERSION@
SED = @SED@
SET_MAKE = @SET_MAKE@
SHELL = @SHELL@
STRIP = @STRIP@
SYSCONFIGDIR = @SYSCONFIGDIR@
USE_NLS = @USE_NLS@
USRLIBRPM = @USRLIBRPM@
VERSION = @VERSION@
WITH_ACL = @WITH_ACL@
WITH_APIDOCS = @WITH_APIDOCS@
WITH_APIDOCS_TARGET = @WITH_APIDOCS_TARGET@
WITH_APR = @WITH_APR@
WITH_ATERM = @WITH_ATERM@
WITH_ATTR = @WITH_ATTR@
WITH_AUGEAS = @WITH_AUGEAS@
WITH_AUGEAS_AUGTOOL = @WITH_AUGEAS_AUGTOOL@
WITH_BASH = @WITH_BASH@
WITH_BASH_CPPFLAGS = @WITH_BASH_CPPFLAGS@
WITH_BASH_LDFLAGS = @WITH_BASH_LDFLAGS@
WITH_BASH_LIBS = @WITH_BASH_LIBS@
WITH_BASH_SUBDIR = @WITH_BASH_SUBDIR@
WITH_BEECRYPT = @WITH_BEECRYPT@
WITH_BEECRYPT_CPPFLAGS = @WITH_BEECRYPT_CPPFLAGS@
WITH_BEECRYPT_LDFLAGS = @WITH_BEECRYPT_LDFLAGS@
WITH_BEECRYPT_LIBS = @WITH_BEECRYPT_LIBS@
WITH_BEECRYPT_SUBDIR = @WITH_BEECRYPT_SUBDIR@
WITH_BZIP2 = @WITH_BZIP2@
WITH_CPUINFO = @WITH_CPUINFO@
WITH_CUDF = @WITH_CUDF@
WITH_CUDF_CUDFTOOL = @WITH_CUDF_CUDFTOOL@
WITH_DB = @WITH_DB@
WITH_DBSQL = @WITH_DBSQL@
WITH_DBSQL_CPPFLAGS = @WITH_DBSQL_CPPFLAGS@
WITH_DBSQL_LDFLAGS = @WITH_DBSQL_LDFLAGS@
WITH_DBSQL_LIBS = @WITH_DBSQL_LIBS@
WITH_DBSQL_SUBDIR = @WITH_DBSQL_SUBDIR@
WITH_DB_CPPFLAGS = @WITH_DB_CPPFLAGS@
WITH_DB_LDFLAGS = @WITH_DB_LDFLAGS@
WITH_DB_LIBS = @WITH_DB_LIBS@
WITH_DB_SUBDIR = @WITH_DB_SUBDIR@
WITH_DMALLOC = @WITH_DMALLOC@
WITH_EFENCE = @WITH_EFENCE@
WITH_EXPAT = @WITH_EXPAT@
WITH_FICL = @WITH_FICL@
WITH_FICL_CPPFLAGS = @WITH_FICL_CPPFLAGS@
WITH_FICL_LDFLAGS = @WITH_FICL_LDFLAGS@
WITH_FICL_LIBS = @WITH_FICL_LIBS@
WITH_FICL_SUBDIR = @WITH_FICL_SUBDIR@
WITH_FILE = @WITH_FILE@
WITH_FILE_CPPFLAGS = @WITH_FILE_CPPFLAGS@
WITH_FILE_LDFLAGS = @WITH_FILE_LDFLAGS@
WITH_FILE_LIBS = @WITH_FILE_LIBS@
WITH_FILE_SUBDIR = @WITH_FILE_SUBDIR@
WITH_GCRYPT = @WITH_GCRYPT@
WITH_GNUTLS = @WITH_GNUTLS@
WITH_GPSEE = @WITH_GPSEE@
WITH_GPSEE_CPPFLAGS = @WITH_GPSEE_CPPFLAGS@
WITH_GPSEE_LDFLAGS = @WITH_GPSEE_LDFLAGS@
WITH_GPSEE_LIBS = @WITH_GPSEE_LIBS@
WITH_GPSEE_SUBDIR = @WITH_GPSEE_SUBDIR@
WITH_JS_SUBDIR = @WITH_JS_SUBDIR@
WITH_JVM = @WITH_JVM@
WITH_KEYUTILS = @WITH_KEYUTILS@
WITH_KEYUTILS_RPMKEY = @WITH_KEYUTILS_RPMKEY@
WITH_LIBELF_DEBUGEDIT = @WITH_LIBELF_DEBUGEDIT@
WITH_LIBGIT2 = @WITH_LIBGIT2@
WITH_LIBGIT2_CPPFLAGS = @WITH_LIBGIT2_CPPFLAGS@
WITH_LIBGIT2_LDFLAGS = @WITH_LIBGIT2_LDFLAGS@
WITH_LIBGIT2_LIBS = @WITH_LIBGIT2_LIBS@
WITH_LIBGIT2_SUBDIR = @WITH_LIBGIT2_SUBDIR@
WITH_LIBTASN1 = @WITH_LIBTASN1@
WITH_LIBTPM = @WITH_LIBTPM@
WITH_LIBTPM_CPPFLAGS = @WITH_LIBTPM_CPPFLAGS@
WITH_LIBTPM_LDFLAGS = @WITH_LIBTPM_LDFLAGS@
WITH_LIBTPM_LIBS = @WITH_LIBTPM_LIBS@
WITH_LIBTPM_SUBDIR = @WITH_LIBTPM_SUBDIR@
WITH_LUA = @WITH_LUA@
WITH_LUA_CPPFLAGS = @WITH_LUA_CPPFLAGS@
WITH_LUA_LDFLAGS = @WITH_LUA_LDFLAGS@
WITH_LUA_LIBS = @WITH_LUA_LIBS@
WITH_LUA_SUBDIR = @WITH_LUA_SUBDIR@
WITH_LUA_SUBDIR_DEF = @WITH_LUA_SUBDIR_DEF@
WITH_LUA_SUBDIR_LIB = @WITH_LUA_SUBDIR_LIB@
WITH_MOZJS185 = @WITH_MOZJS185@
WITH_MOZJS185_CPPFLAGS = @WITH_MOZJS185_CPPFLAGS@
WITH_MOZJS185_LDFLAGS = @WITH_MOZJS185_LDFLAGS@
WITH_MOZJS185_LIBS = @WITH_MOZJS185_LIBS@
WITH_MOZJS185_SUBDIR = @WITH_MOZJS185_SUBDIR@
WITH_MRUBY = @WITH_MRUBY@
WITH_NEON = @WITH_NEON@
WITH_NEON_CPPFLAGS = @WITH_NEON_CPPFLAGS@
WITH_NEON_LDFLAGS = @WITH_NEON_LDFLAGS@
WITH_NEON_LIBS = @WITH_NEON_LIBS@
WITH_NEON_SUBDIR = @WITH_NEON_SUBDIR@
WITH_NIX = @WITH_NIX@
WITH_NSS = @WITH_NSS@
WITH_OPENSSL = @WITH_OPENSSL@
WITH_PAKCHOIS = @WITH_PAKCHOIS@
WITH_PATH_VERSIONED = @WITH_PATH_VERSIONED@
WITH_PATH_VERSIONED_SUFFIX = @WITH_PATH_VERSIONED_SUFFIX@
WITH_PCRE = @WITH_PCRE@
WITH_PCRE_CPPFLAGS = @WITH_PCRE_CPPFLAGS@
WITH_PCRE_LDFLAGS = @WITH_PCRE_LDFLAGS@
WITH_PCRE_LIBS = @WITH_PCRE_LIBS@
WITH_PCRE_SUBDIR = @WITH_PCRE_SUBDIR@
WITH_PERLEMBED = @WITH_PERLEMBED@
WITH_PERL_LIBS = @WITH_PERL_LIBS@
WITH_PERL_SUBDIR = @WITH_PERL_SUBDIR@
WITH_PERL_SUBPACKAGE = @WITH_PERL_SUBPACKAGE@
WITH_PERL_URPM_LIBS = @WITH_PERL_URPM_LIBS@
WITH_PERL_URPM_SUBDIR = @WITH_PERL_URPM_SUBDIR@
WITH_PERL_URPM_SUBPACKAGE = @WITH_PERL_URPM_SUBPACKAGE@
WITH_POPT = @WITH_POPT@
WITH_POPT_CPPFLAGS = @WITH_POPT_CPPFLAGS@
WITH_POPT_LDFLAGS = @WITH_POPT_LDFLAGS@
WITH_POPT_LIBS = @WITH_POPT_LIBS@
WITH_POPT_SUBDIR = @WITH_POPT_SUBDIR@
WITH_PYTHONEMBED = @WITH_PYTHONEMBED@
WITH_PYTHON_INCDIR = @WITH_PYTHON_INCDIR@
WITH_PYTHON_SUBDIR = @WITH_PYTHON_SUBDIR@
WITH_PYTHON_SUBPACKAGE = @WITH_PYTHON_SUBPACKAGE@
WITH_RC = @WITH_RC@
WITH_RC_CPPFLAGS = @WITH_RC_CPPFLAGS@
WITH_RC_LDFLAGS = @WITH_RC_LDFLAGS@
WITH_RC_LIBS = @WITH_RC_LIBS@
WITH_RC_SUBDIR = @WITH_RC_SUBDIR@
WITH_READLINE = @WITH_READLINE@
WITH_RUBY = @WITH_RUBY@
WITH_RUBY_CPPFLAGS = @WITH_RUBY_CPPFLAGS@
WITH_RUBY_SUBDIR = @WITH_RUBY_SUBDIR@
WITH_RUBY_VENDORARCHDIR = @WITH_RUBY_VENDORARCHDIR@
WITH_SELINUX = @WITH_SELINUX@
WITH_SEMANAGE = @WITH_SEMANAGE@
WITH_SEMANAGE_SEMODULE = @WITH_SEMANAGE_SEMODULE@
WITH_SEPOL = @WITH_SEPOL@
WITH_SPIDERMONKEY_SUBDIR = @WITH_SPIDERMONKEY_SUBDIR@
WITH_SQLITE = @WITH_SQLITE@
WITH_SQLITE_CPPFLAGS = @WITH_SQLITE_CPPFLAGS@
WITH_SQLITE_LDFLAGS = @WITH_SQLITE_LDFLAGS@
WITH_SQLITE_LIBS = @WITH_SQLITE_LIBS@
WITH_SQLITE_SUBDIR = @WITH_SQLITE_SUBDIR@
WITH_SQUIRREL = @WITH_SQUIRREL@
WITH_SUBVERSION = @WITH_SUBVERSION@
WITH_SYCK = @WITH_SYCK@
WITH_SYCK_CPPFLAGS = @WITH_SYCK_CPPFLAGS@
WITH_SYCK_LDFLAGS = @WITH_SYCK_LDFLAGS@
WITH_SYCK_LIBS = @WITH_SYCK_LIBS@
WITH_SYCK_SUBDIR = @WITH_SYCK_SUBDIR@
WITH_TCL = @WITH_TCL@
WITH_TCL_SUBDIR = @WITH_TCL_SUBDIR@
WITH_TOMCRYPT = @WITH_TOMCRYPT@
WITH_UNIXODBC = @WITH_UNIXODBC@
WITH_UUID = @WITH_UUID@
WITH_XAR = @WITH_XAR@
WITH_XAR_CPPFLAGS = @WITH_XAR_CPPFLAGS@
WITH_XAR_LDFLAGS = @WITH_XAR_LDFLAGS@
WITH_XAR_LIBS = @WITH_XAR_LIBS@
WITH_XAR_SUBDIR = @WITH_XAR_SUBDIR@
WITH_XZ = @WITH_XZ@
WITH_XZ_CPPFLAGS = @WITH_XZ_CPPFLAGS@
WITH_XZ_LDFLAGS = @WITH_XZ_LDFLAGS@
WITH_XZ_LIBS = @WITH_XZ_LIBS@
WITH_XZ_SUBDIR = @WITH_XZ_SUBDIR@
WITH_ZLIB = @WITH_ZLIB@
WITH_ZLIB_CPPFLAGS = @WITH_ZLIB_CPPFLAGS@
WITH_ZLIB_LDFLAGS = @WITH_ZLIB_LDFLAGS@
WITH_ZLIB_LIBS = @WITH_ZLIB_LIBS@
WITH_ZLIB_SUBDIR = @WITH_ZLIB_SUBDIR@
XGETTEXT = @XGETTEXT@
XGETTEXT_015 = @XGETTEXT_015@
XGETTEXT_EXTRA_OPTIONS = @XGETTEXT_EXTRA_OPTIONS@
YACC = @YACC@
YFLAGS = @YFLAGS@
_ACJNI_JAVAC = @_ACJNI_JAVAC@
__7ZIP = @__7ZIP@
__ABI_COMPLIANCE_CHECKER = @__ABI_COMPLIANCE_CHECKER@
__API_SANITY_CHECKER = @__API_SANITY_CHECKER@
__BASH = @__BASH@
__BZIP2 = @__BZIP2@
__CAT = @__CAT@
__CHATTR = @__CHATTR@
__CHGRP = @__CHGRP@
__CHGRP_RHF = @__CHGRP_RHF@
__CHMOD = @__CHMOD@
__CHOWN = @__CHOWN@
__CHOWN_RHF = @__CHOWN_RHF@
__CMAKE = @__CMAKE@
__CPIO = @__CPIO@
__CURL = @__CURL@
__CVS = @__CVS@
__DBSQL = @__DBSQL@
__DB_ARCHIVE = @__DB_ARCHIVE@
__DB_CHECKPOINT = @__DB_CHECKPOINT@
__DB_DEADLOCK = @__DB_DEADLOCK@
__DB_DUMP = @__DB_DUMP@
__DB_HOTBACKUP = @__DB_HOTBACKUP@
__DB_LOAD = @__DB_LOAD@
__DB_LOG_VERIFY = @__DB_LOG_VERIFY@
__DB_PRINTLOG = @__DB_PRINTLOG@
__DB_RECOVER = @__DB_RECOVER@
__DB_REPLICATE = @__DB_REPLICATE@
__DB_SQL_CODEGEN = @__DB_SQL_CODEGEN@
__DB_STAT = @__DB_STAT@
__DB_TUNER = @__DB_TUNER@
__DB_UPGRADE = @__DB_UPGRADE@
__DB_VERIFY = @__DB_VERIFY@
__DIFF = @__DIFF@
__DITTO = @__DITTO@
__DOXYGEN = @__DOXYGEN@
__FILE = @__FILE@
__GIT = @__GIT@
__GPG = @__GPG@
__GSR = @__GSR@
__GST_INSPECT = @__GST_INSPECT@
__GZIP = @__GZIP@
__HG = @__HG@
__ID = @__ID@
__ID_U = @__ID_U@
__INSTALL = @__INSTALL@
__INSTALL_INFO = @__INSTALL_INFO@
__LD = @__LD@
__LDCONFIG = @__LDCONFIG@
__LN = @__LN@
__LRZIP = @__LRZIP@
__LSATTR = @__LSATTR@
__LZIP = @__LZIP@
__LZMA = @__LZMA@
__LZOP = @__LZOP@
__MAKE = @__MAKE@
__MKDIR = @__MKDIR@
__MKDIR_P = @__MKDIR_P@
__MODINFO = @__MODINFO@
__MONGO = @__MONGO@
__MRUBY = @__MRUBY@
__MV = @__MV@
__NM = @__NM@
__OBJCOPY = @__OBJCOPY@
__OBJDUMP = @__OBJDUMP@
__PATCH = @__PATCH@
__PAX = @__PAX@
__PERL = @__PERL@
__PGP = @__PGP@
__PHP = @__PHP@
__PYTHON = @__PYTHON@
__RM = @__RM@
__RMDIR = @__RMDIR@
__RSH = @__RSH@
__RUBY = @__RUBY@
__SED = @__SED@
__SH = @__SH@
__SQLITE3 = @__SQLITE3@
__SSH = @__SSH@
__STRIP = @__STRIP@
__SVN = @__SVN@
__TAR = @__TAR@
__TCLSH = @__TCLSH@
__UNZIP = @__UNZIP@
__XZ = @__XZ@
abs_builddir = @abs_builddir@
abs_srcdir = @abs_srcdir@
abs_top_builddir = @abs_top_builddir@
abs_top_srcdir = @abs_top_srcdir@
ac_ct_AR = @ac_ct_AR@
ac_ct_CC = @ac_ct_CC@
ac_ct_CXX = @ac_ct_CXX@
ac_ct_DUMPBIN = @ac_ct_DUMPBIN@
am__include = @am__include@
am__leading_dot = @am__leading_dot@
am__quote = @am__quote@
am__tar = @am__tar@
am__untar = @am__untar@
autorelocate_dcolor = @autorelocate_dcolor@
autorelocate_path = @autorelocate_path@
bindir = @bindir@
build = @build@
build_alias = @build_alias@
build_cpu = @build_cpu@
build_os = @build_os@
build_vendor = @build_vendor@
builddir = @builddir@
datadir = @datadir@
datarootdir = @datarootdir@
docdir = @docdir@
dvidir = @dvidir@
exec_prefix = @exec_prefix@
exeext = @exeext@
host = @host@
host_alias = @host_alias@
host_cpu = @host_cpu@
host_os = @host_os@
host_vendor = @host_vendor@
htmldir = @htmldir@
includedir = @includedir@
infodir = @infodir@
install_sh = @install_sh@
libdir = @libdir@
libexecdir = @libexecdir@
libext = @libext@
localedir = @localedir@
localstatedir = @localstatedir@
mandir = @mandir@
mkdir_p = @mkdir_p@
objext = @objext@
oldincludedir = @oldincludedir@
pdfdir = @pdfdir@
pkgpyexecdir = @pkgpyexecdir@
pkgpythondir = @pkgpythondir@
prefix = @prefix@
program_transform_name = @program_transform_name@
psdir = @psdir@
pyexecdir = @pyexecdir@
pythondir = @pythondir@
sbindir = @sbindir@
sharedstatedir = @sharedstatedir@
shlibext = @shlibext@
srcdir = @srcdir@
subdirs = @subdirs@
sysconfdir = @sysconfdir@
target = @target@
target_alias = @target_alias@
target_cpu = @target_cpu@
target_os = @target_os@
target_vendor = @target_vendor@
testdir = @testdir@
top_build_prefix = @top_build_prefix@
top_builddir = @top_builddir@
top_srcdir = @top_srcdir@
usrprefix = @usrprefix@
uudecode = @uudecode@
varprefix = @varprefix@
AUTOMAKE_OPTIONS = 1.4 foreign
EXTRA_DIST = \
	genpgp.sh \
	genssl.sh \
	gpsee/gffi.js \
	ref/.alldigests \
	ref/DB_CONFIG \
	ref/edos.manifest \
	ref/edos.qa.1 \
	ref/edos.qa.2 \
	ref/filelists.xml \
	ref/hkp \
	ref/manifest \
	ref/other.xml \
	ref/popt.Kv \
	ref/popt.Kv-beecrypt \
	ref/popt.Kv-nss \
	ref/popt.Kv-ssl \
	ref/popt.xml \
	ref/popt.yaml \
	ref/primary.xml \
	ref/querytags \
	ref/repomd.xml \
	ref/rpmdb.sql \
	ref/showrc \
	ref/sqldb-basic.out \
	ref/sqldb-basic.sql \
	ref/version \
	spew spew.conf \
	tpgp.c tssl.c

SUBDIRS = . mongo
AM_CPPFLAGS = \
	-I$(srcdir) \
	-I$(top_srcdir) \
	-I$(top_srcdir)/build \
	-I$(top_srcdir)/lib \
	-I$(top_builddir)/lib \
	-I$(top_srcdir)/rpmdb \
	-I$(top_srcdir)/rpmio \
	-I$(top_srcdir)/misc \
	@WITH_BEECRYPT_CPPFLAGS@ \
	@WITH_DB_CPPFLAGS@ \
	@WITH_ZLIB_CPPFLAGS@ \
	@WITH_LUA_CPPFLAGS@ \
	@WITH_FILE_CPPFLAGS@ \
	@WITH_PCRE_CPPFLAGS@ \
	@WITH_POPT_CPPFLAGS@ \
	@WITH_SYCK_CPPFLAGS@ \
	@WITH_XAR_CPPFLAGS@

RPMIO_LDADD = \
	$(top_builddir)/rpmio/librpmio.la \
	$(top_builddir)/misc/librpmmisc.la \
	@LTLIBINTL@

RPMDB_LDADD = \
	$(top_builddir)/rpmdb/librpmdb.la \
	$(RPMIO_LDADD)

RPM_LDADD = \
	$(top_builddir)/build/librpmbuild.la \
	$(top_builddir)/lib/librpm.la \
	$(RPMDB_LDADD)

macros = $(abs_top_builddir)/macros/macros:$(testdir)/macros
rpmpopt = $(abs_top_builddir)/rpmpopt
rpm = $(abs_top_builddir)/rpm --rpmpopt=$(rpmpopt) --macros $(macros)
rpmbuild = $(abs_top_builddir)/rpmbuild --rpmpopt=$(rpmpopt) --macros $(macros)
rpm2cpio = $(abs_top_builddir)/tools/rpm2cpio
rpmcache = $(abs_top_builddir)/tools/rpmcache --rpmpopt=$(rpmpopt) --macros $(macros)
rpmdigest = $(abs_top_builddir)/tools/rpmdigest
rpmrepo = $(abs_top_builddir)/tools/rpmrepo
rpmsql = $(abs_top_builddir)/tools/sqlite3
rpmsolver = ${rpm} -D '_dbpath $(testdir)/tmp/cachedb'
rpmsolverA = ${rpm} -D '_dbpath %{_solve_A}'
rpmsolverB = ${rpm} -D '_dbpath %{_solve_B}'
poky_topdir = /X/src/poky
poky_deploy = $(poky_topdir)/build/tmp/deploy/rpm
poky_pkgsdirA = $(poky_deploy)/i586
poky_pkgsdirB = $(poky_deploy)/all
poky_pkgsdirC = $(poky_deploy)/qemux86
poky_options = --noaid --nodeps --noorder --noscripts --notriggers --noparentdirs --nolinktos --stats
poky_force = --replacepkgs --replacefiles --oldpackage
poky_solverA = ${rpm} -i $(poky_force) -D '_dbpath %{_solve_A}' --justdb $(poky_options)
poky_solverB = ${rpm} -i $(poky_force) -D '_dbpath %{_solve_B}' --justdb $(poky_options)
poky_solverC = ${rpm} -i $(poky_force) -D '_dbpath %{_solve_C}' --justdb $(poky_options)
tdsa = ./tdsa
tecdsa = ./tecdsa
thkp = ./thkp -H localhost
tkey = ./tkey
tpgp = ./tpgp --macros $(macros)
trsa = ./trsa
tssl = ./tssl --macros $(macros)
chroot = $(abs_top_builddir)/tools/chroot
cp = $(abs_top_builddir)/tools/cp
echo = /bin/echo
find = $(abs_top_builddir)/tools/find
grep = $(abs_top_builddir)/tools/grep
lua = $(abs_top_builddir)/lua/lua
mtree = $(abs_top_builddir)/tools/mtree
ngsr = $(abs_top_builddir)/js/ngsr
rc = $(abs_top_builddir)/tools/rc
todbc = ${abs_top_builddir}/rpmio/todbc
#wget =		$(abs_top_builddir)/tools/wget -nv
wget = wget -nv
vg = $(LIBTOOL) --mode=execute vg 
sudo = sudo
rpmdb = $(testdir)/tmp/rpmdb
rpmdb_Tables = \
	$(rpmdb)/Arch	\
	$(rpmdb)/Basenames	\
	$(rpmdb)/Conflictname	\
	$(rpmdb)/Dirnames	\
	$(rpmdb)/Filedigests	\
	$(rpmdb)/Filepaths	\
	$(rpmdb)/Group	\
	$(rpmdb)/Installtid	\
	$(rpmdb)/Name	\
	$(rpmdb)/Nvra	\
	$(rpmdb)/Obsoletename	\
	$(rpmdb)/Os	\
	$(rpmdb)/Packagecolor	\
	$(rpmdb)/Providename	\
	$(rpmdb)/Pubkeys	\
	$(rpmdb)/Release	\
	$(rpmdb)/Requirename	\
	$(rpmdb)/Seqno	\
	$(rpmdb)/Sha1header	\
	$(rpmdb)/Sigmd5	\
	$(rpmdb)/Sourcepkgid	\
	$(rpmdb)/Triggername	\
	$(rpmdb)/Version

db_archive = @__DB_ARCHIVE@	-h $(rpmdb) -v
db_checkpoint = @__DB_CHECKPOINT@ -h $(rpmdb) -v
db_dump = @__DB_DUMP@	-h $(rpmdb)
db_load = @__DB_LOAD@	-h $(rpmdb)
db_log_verify = @__DB_LOG_VERIFY@ -h $(rpmdb)
db_printlog = @__DB_PRINTLOG@	-h $(rpmdb)
db_recover = @__DB_RECOVER@	-h $(rpmdb) -v
db_stat = @__DB_STAT@	-h $(rpmdb)
db_upgrade = @__DB_UPGRADE@	-h $(rpmdb) -v
db_verify = @__DB_VERIFY@	-h $(rpmdb)
dbsql = $(abs_top_builddir)/tools/dbsql
chattr = @__CHATTR@
cpio = @__CPIO@
diff = @__DIFF@
file = @__FILE@
gpg = @__GPG@
gsr = @__GSR@
ln = @__LN@
mkdir = @__MKDIR@
mongo = @__MONGO@
# XXX mongo.rpm5.org
mongoserver = 198.178.231.189
mv = @__MV@
rm = @__RM@
rmdir = @__RMDIR@
sqlite3 = @__SQLITE3@
tar = @__TAR@

#tdsa_SOURCES = tdsa.c 
#tdsa_LDADD = $(RPMIO_LDADD)
tecdsa_SOURCES = tecdsa.c
tecdsa_LDADD = $(RPMIO_LDADD)
thkp_SOURCES = thkp.c
thkp_LDADD = $(RPMIO_LDADD)
tkey_SOURCES = tkey.c
tkey_LDADD = $(RPM_LDADD)
tpgp_SOURCES = tpgp.c
tpgp_LDADD = $(RPM_LDADD)
trsa_SOURCES = trsa.c
trsa_LDADD = $(RPMIO_LDADD)
tssl_SOURCES = genssl.h tssl.c
tssl_LDADD = $(RPM_LDADD)
#	@${rpmdigest} --alldigests ref/[^C]* > tmp/.alldigests
#	@-diff -u tmp/.alldigests ref/.alldigests || cp tmp/.alldigests ref/.alldigests
#	@-${mtree} -c -p ref | ${mtree} -p ref	# XXX mtime usecs need fixing
POPTURI = http://rpm5.org/files/popt/
POPTPKGS = \
	popt-1.14-1.src.rpm \
	popt-1.14-1.i386.rpm


# AL -- AsianLinux
# XXX notyet
#AL_mirror =	http://download.asianlinux.net/pub/AsianLinux
#AL2_uri =	$(AL_mirror)/2/i386/os/AsianLinux/RPMS/
# ALT -- Alt Linux
ALT_mirror = http://distro.ibiblio.org/pub/linux/distributions/altlinux
ALT51_uri = $(ALT_mirror)/5.1/branch/files/i586/RPMS/
ALT51_manifest = $(testdir)/ref/alt-minimal.x86_64.manifest
# ARK -- Ark Linux
ARK_uri = http://arklinux.osuosl.org/dockyard-devel/RPMS/
# BL -- Berry Linux
# BP -- BlackPanther Linux
# XXX notyet
#BP_mirror =	http://ftp.freepark.org/pub/linux/distributions/blackpanther
#BP10_uri =	$(BP_mirror)/All/v10.1/media/ \
#		$(BP_mirror)/All/v10.1/media1/ \
#		$(BP_mirror)/All/v10.1/media2/ \
#		$(BP_mirror)/All/v10.1/media3/ \
#		$(BP_mirror)/All/v10.1/media4/ \
#		$(BP_mirror)/All/v10.1/media5/ \
#		$(BP_mirror)/All/v10.1/media6/ \
#		$(BP_mirror)/All/v10.1/media7/ \
#		$(BP_mirror)/All/v10.1/media8_games/ \
#		$(BP_mirror)/All/v10.1/media8_oooex/
# CM -- Caixa Magica
CM_mirror = http://ftp.caixamagica.pt
CM12_uri = $(CM_mirror)/12/oficial/i586/media/main/release/
CM12_manifest = $(testdir)/ref/cm12-bash.i586.manifest
CM14_uri = $(CM_mirror)/14/oficial/i586/media/main/release/
CM14_manifest = $(testdir)/ref/cm14-minimal.i586.manifest
CM15_uri = $(CM_mirror)/15/oficial/i586/media/main/release/
CM15_manifest = $(testdir)/ref/cm15-medium.i586.manifest
# CAOS -- cAos
CAOS_mirror = http://mirror.caoslinux.org
CAOS2_uri = $(CAOS_mirror)/cAos-2/core/i386/
CAOS2_manifest = $(testdir)/ref/cAos2-minimal.i386.manifest
CAOS3_uri = $(CAOS_mirror)/Caos-NSA-1.0/packages/i386/
# C -- CentOS
C_mirror = http://ftp.linux.ncsu.edu/pub/CentOS/
C55_uri = $(C_mirror)/5.5/os/i386/CentOS/
C54_uri = http://vault.centos.org/5.4/os/i386/CentOS/
C53_uri = http://vault.centos.org/5.3/os/i386/CentOS/
C52_uri = http://vault.centos.org/5.2/os/i386/CentOS/
C51_uri = http://vault.centos.org/5.1/os/i386/CentOS/
C50_uri = http://vault.centos.org/5.0/os/i386/CentOS/
# XXX notyet
#C48_uri =	$(C_mirror)/4.8/os/i386/CentOS/RPMS/
#C39_uri =	$(C_mirror)/3.9/os/i386/RedHat/RPMS/

# G -- geode-RHEL6
G_mirror = http://wp3.jbj.org/geode-RHEL6
G_uri = $(SL_mirror)/RPMS
G_manifest = $(testdir)/ref/rhel6-bash.geode.manifest

# IDMS -- IDMS Linux
IDMS_uri = http://download.idms-linux.org/trunk/i586/RPMS/
IDMS_manifest = $(testdir)/ref/idms-minimal.i586.manifest
# MYTHDORA -- MythDora
# XXX notyet
#MYTHDORA_mirror = http://mirror.beww.org/mythdora
#MYTHDORA1223 =	$(MYTHDORA_mirror)/12.23/i386/os/Packages/

# MAG -- Mageia
#MAG_mirror =	ftp://mirrors.us.kernel.org/mandriva/Mandrakelinux/official
MAG2011_uri = /home/i586-mageia-2011.0/i586/media/core/release/
MAG2011_manifest = $(testdir)/ref/mag2011-medium.i586.manifest

# MDV -- Mandriva
MDV_mirror = http://mirrors.us.kernel.org/mandriva/Mandrakelinux/official
MDV2009_uri = $(MDV_mirror)/2009.0/i586/media/main/release/
MDV2009_manifest = $(testdir)/ref/mdv2009-minimal.i586.manifest
MDV2010_uri = $(MDV_mirror)/2010.0/i586/media/main/release/
MDV2010_manifest = $(testdir)/ref/mdv2010-minimal.i586.manifest
MDV20101_uri = $(MDV_mirror)/2010.1/i586/media/main/release/
MDV20101_manifest = $(testdir)/ref/Mandriva2010.1-bash.i586.manifest
#MDV20102_uri =	$(MDV_mirror)/2010.2/i586/media/main/release/
#MDV20102_manifest = $(testdir)/ref/Mandriva2010.2-bash.i586.manifest
MDV2011_uri = $(MDV_mirror)/2011/i586/media/main/release/
MDV2011_manifest = $(testdir)/ref/mdv2011-everything.i586.manifest
# MEEGO -- MeeGo
# XXX lt-find: rpmdav.c:1331: htmlParse: Assertion `he > h' failed.
MEEGO_mirror = http://repo.meego.com/MeeGo/builds/1.0.99/daily/
MEEGO_uri = $(MEEGO_mirror)/core/repos/ia32/packages/i586/ \
		$(MEEGO_mirror)/core/repos/ia32/packages/i686/ \
		$(MEEGO_mirror)/core/repos/ia32/packages/noarch/

MEEGO_manifest = $(testdir)/ref/MeeGo-everything.manifest
# MOBLIN -- Moblin
MOBLIN_mirror = http://mirrors.kernel.org/moblin/releases
MOBLIN21_uri = $(MOBLIN_mirror)/2.1/ia32/os/i586/ \
		$(MOBLIN_mirror)/2.1/ia32/os/noarch/

MOBLIN21_manifest = $(testdir)/ref/moblin21-everything.manifest
# MOMONGA -- Momonga Linux
MOMONGA_mirror = http://dist.momonga-linux.org/pub/momonga
MOMONGA7_uri = $(MOMONGA_mirror)/7/Momonga/i686/os/Packages/
# OJUBA -- Ojuba Linux
OJUBA_mirror = http://www.ojuba.org/downloads/releases
OJUBA4_uri = $(OJUBA_mirror)/4/Everything/i386/os/Packages/
# OWL == OpenWall Linux
OWL_mirror = http://distro.ibiblio.org/pub/linux/distributions/openwall/Owl
OWL2_uri = $(OWL_mirror)/2.0-stable/i386/RPMS/
OWL3_uri = $(OWL_mirror)/3.0-stable/i686/RPMS/
OWL2_manifest = $(testdir)/ref/owl2-everything.i386.manifest
# PCLOS -- PCLinuxOS
# PLD -- PLD Linux
PLD_mirror = http://ftp.pld-linux.org/dists
PLD3_uri = $(PLD_mirror)/3.0/PLD/i486/RPMS/ \
		$(PLD_mirror)/3.0/PLD/i686/RPMS/ \
		$(PLD_mirror)/3.0/PLD/noarch/RPMS/

# RF -- RPM Forge
# SL -- Scientific Linux
SL_mirror = http://ftp.scientificlinux.org/linux/scientific
SL60_uri = $(SL_mirror)/6.0/i386/os/Packages
SL60_manifest = $(testdir)/ref/sl60-everything.manifest
SL55_uri = $(SL_mirror)/55/i386/SL/
SL55_manifest = $(testdir)/ref/sl55-everything.manifest
SL54_uri = $(SL_mirror)/54/i386/SL/
SL53_uri = $(SL_mirror)/53/i386/SL/
SL52_uri = $(SL_mirror)/52/i386/SL/
SL51_uri = $(SL_mirror)/51/i386/SL/
SL50_uri = $(SL_mirror)/50/i386/SL/
# XXX notyet
#SL48_uri =	$(SL_mirror)/48/i386/SL/
# SLES -- SuSE
SLES_mirror = http://mirrors1.kernel.org/opensuse/distribution
SLES11_1_uri = $(SLES_mirror)/11.1/repo/oss/suse/i586/
SLES11_2_uri = $(SLES_mirror)/11.2/repo/oss/suse/i586/
SLES11_3_uri = $(SLES_mirror)/11.3/repo/oss/suse/i586/
# TURBO -- TurboLinux
TURBO_mirror = http://ftp.turbolinux.co.jp/pub/TurboLinux/TurboLinux
TURBO12_uri = $(TURBO_mirror)/ia32/Client/12/turbolinux/
# UL -- Unity Linux
UL_mirror = http://distro.ibiblio.org/pub/linux/distributions/unity/repo
UL_uri = $(UL_mirror)/2009/x86_64/unity/
UL_manifest = $(testdir)/ref/ul2011-minimal.i586.manifest
# XXX UL_manifest =	$(testdir)/ref/unity-minimal.x86_64.manifest
# VINE -- Vine Linux
VINE_mirror = http://ring.u-toyama.ac.jp/pub/linux/Vine
VINE51_uri = $(VINE_mirror)/Vine-5.1/i386/Vine/RPMS/
VINE51_manifest = $(testdir)/ref/vine51-everything.manifest
# YDL -- Yellow Dog Linug (ppc)
YDL_mirror = http://ydl.oregonstate.edu/releases
YDL61_uri = $(YDL_mirror)/yellowdog-6.1/os/YellowDog/
YDL62_uri = $(YDL_mirror)/yellowdog-6.2/os/YellowDog/
# YL -- Yoper Linux
YL_mirror = http://ftp.yoper-linux.org/pub/yoper/pkg
YL_uri = $(YL_mirror)/RPMS.rocketfuel/
#YLDYNA_uri =   $(YL_mirror)/RPMS.dynamite/
DISTROS = \
	ALT51 \
	ARK \
	CM12 CM14 CM15 \
	CAOS2 CAOS3 \
	C55 C54 C53 C52 C51 C50 \
	G IDMS \
	MDV2009 MDV2010 MDV2011 MAG2011 \
	MEEGO MOBLIN21 \
	OJUBA4 \
	OWL2 OWL3 \
	PLD3 \
	SL55 SL54 SL53 SL52 SL51 SL50 \
	SLES11_3 SLES11_2 SLES11_1  \
	UL \
	YDL62 YDL61 \
	YL

now = date -u --rfc-3339=seconds
XXXcache = /var/www/html/cache
XXXIDMS = $(XXXcache)/i586-idms-linux/RPMS/
XXXOWL2 = $(XXXcache)/i386-openwall-OWL2/RPMS/
XXXOWL3 = $(XXXcache)/i686-openwall-OWL3/RPMS/
XXXALT51 = $(XXXcache)/x86_64-alt-sisyphus/RPMS/
XXXG = /var/www/html/geode-RHEL6/RPMS/
XXXCM15 = /home/i586-caixa-cm15/ftp.caixamagica.pt/15/oficial/i586/
XXXCM14 = /home/i586-caixa-cm14/ftp.caixamagica.pt/14/oficial/i586/media/main/release/
XXXMAG2011 = /home/i586-mageia-2011.0/i586/media/core/release/
XXXUL2011 = /home/i586-unity-linux/repo/current/i586/
XXXMDV2011 = /home/i586-mandriva-mdv2011.0/i586/media/main/release/
XXXMDV2010 = /home/i586-mandriva-mdv2010.0/i586/media/main/release/
XXXMDV2009 = /home/i586-mandriva-mdv2009.0/i586/media/main/release/
Eopts = --nodeps
Uopts = $(Eopts)
TUopts = --relocate "/tmp=${testdir}/tmp" --noparentdirs $(Uopts)
TEopts = $(Eopts)
INTERPRETERS = lua tcl perl # ruby # python
gitdir = $(testdir)/tmp/git
tgit = ${abs_top_builddir}/rpmio/tgit --git-dir="$(gitdir)" --work-tree="$(gitdir)" --
git = @__GIT@ --git-dir="$(gitdir)/.git" --work-tree="$(gitdir)"
odbc_uri_mysql = mysql://luser:jasnl@harwich.jbj.org/test
odbc_uri_postgres = postgres://luser:jasnl@harwich.jbj.org/test
all: all-recursive

.SUFFIXES:
.SUFFIXES: .c .lo .o .obj
$(srcdir)/Makefile.in: @MAINTAINER_MODE_TRUE@ $(srcdir)/Makefile.am  $(am__configure_deps)
	@for dep in $?; do \
	  case '$(am__configure_deps)' in \
	    *$$dep*) \
	      ( cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh ) \
	        && { if test -f $@; then exit 0; else break; fi; }; \
	      exit 1;; \
	  esac; \
	done; \
	echo ' cd $(top_srcdir) && $(AUTOMAKE) --foreign tests/Makefile'; \
	$(am__cd) $(top_srcdir) && \
	  $(AUTOMAKE) --foreign tests/Makefile
Makefile: $(srcdir)/Makefile.in $(top_builddir)/config.status
	@case '$?' in \
	  *config.status*) \
	    cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh;; \
	  *) \
	    echo ' cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@ $(am__depfiles_maybe)'; \
	    cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@ $(am__depfiles_maybe);; \
	esac;

$(top_builddir)/config.status: $(top_srcdir)/configure $(CONFIG_STATUS_DEPENDENCIES)
	cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh

$(top_srcdir)/configure: @MAINTAINER_MODE_TRUE@ $(am__configure_deps)
	cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh
$(ACLOCAL_M4): @MAINTAINER_MODE_TRUE@ $(am__aclocal_m4_deps)
	cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh
$(am__aclocal_m4_deps):
macros: $(top_builddir)/config.status $(srcdir)/macros.in
	cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@

clean-noinstPROGRAMS:
	@list='$(noinst_PROGRAMS)'; test -n "$$list" || exit 0; \
	echo " rm -f" $$list; \
	rm -f $$list || exit $$?; \
	test -n "$(EXEEXT)" || exit 0; \
	list=`for p in $$list; do echo "$$p"; done | sed 's/$(EXEEXT)$$//'`; \
	echo " rm -f" $$list; \
	rm -f $$list

tecdsa$(EXEEXT): $(tecdsa_OBJECTS) $(tecdsa_DEPENDENCIES) $(EXTRA_tecdsa_DEPENDENCIES) 
	@rm -f tecdsa$(EXEEXT)
	$(AM_V_CCLD)$(LINK) $(tecdsa_OBJECTS) $(tecdsa_LDADD) $(LIBS)

thkp$(EXEEXT): $(thkp_OBJECTS) $(thkp_DEPENDENCIES) $(EXTRA_thkp_DEPENDENCIES) 
	@rm -f thkp$(EXEEXT)
	$(AM_V_CCLD)$(LINK) $(thkp_OBJECTS) $(thkp_LDADD) $(LIBS)

tkey$(EXEEXT): $(tkey_OBJECTS) $(tkey_DEPENDENCIES) $(EXTRA_tkey_DEPENDENCIES) 
	@rm -f tkey$(EXEEXT)
	$(AM_V_CCLD)$(LINK) $(tkey_OBJECTS) $(tkey_LDADD) $(LIBS)

tpgp$(EXEEXT): $(tpgp_OBJECTS) $(tpgp_DEPENDENCIES) $(EXTRA_tpgp_DEPENDENCIES) 
	@rm -f tpgp$(EXEEXT)
	$(AM_V_CCLD)$(LINK) $(tpgp_OBJECTS) $(tpgp_LDADD) $(LIBS)

trsa$(EXEEXT): $(trsa_OBJECTS) $(trsa_DEPENDENCIES) $(EXTRA_trsa_DEPENDENCIES) 
	@rm -f trsa$(EXEEXT)
	$(AM_V_CCLD)$(LINK) $(trsa_OBJECTS) $(trsa_LDADD) $(LIBS)

tssl$(EXEEXT): $(tssl_OBJECTS) $(tssl_DEPENDENCIES) $(EXTRA_tssl_DEPENDENCIES) 
	@rm -f tssl$(EXEEXT)
	$(AM_V_CCLD)$(LINK) $(tssl_OBJECTS) $(tssl_LDADD) $(LIBS)

mostlyclean-compile:
	-rm -f *.$(OBJEXT)

distclean-compile:
	-rm -f *.tab.c

@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/tecdsa.Po@am__quote@
@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/thkp.Po@am__quote@
@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/tkey.Po@am__quote@
@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/tpgp.Po@am__quote@
@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/trsa.Po@am__quote@
@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/tssl.Po@am__quote@

.c.o:
@am__fastdepCC_TRUE@	$(AM_V_CC)depbase=`echo $@ | sed 's|[^/]*$$|$(DEPDIR)/&|;s|\.o$$||'`;\
@am__fastdepCC_TRUE@	$(COMPILE) -MT $@ -MD -MP -MF $$depbase.Tpo -c -o $@ $< &&\
@am__fastdepCC_TRUE@	$(am__mv) $$depbase.Tpo $$depbase.Po
@AMDEP_TRUE@@am__fastdepCC_FALSE@	$(AM_V_CC)source='$<' object='$@' libtool=no @AMDEPBACKSLASH@
@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
@am__fastdepCC_FALSE@	$(AM_V_CC@am__nodep@)$(COMPILE) -c -o $@ $<

.c.obj:
@am__fastdepCC_TRUE@	$(AM_V_CC)depbase=`echo $@ | sed 's|[^/]*$$|$(DEPDIR)/&|;s|\.obj$$||'`;\
@am__fastdepCC_TRUE@	$(COMPILE) -MT $@ -MD -MP -MF $$depbase.Tpo -c -o $@ `$(CYGPATH_W) '$<'` &&\
@am__fastdepCC_TRUE@	$(am__mv) $$depbase.Tpo $$depbase.Po
@AMDEP_TRUE@@am__fastdepCC_FALSE@	$(AM_V_CC)source='$<' object='$@' libtool=no @AMDEPBACKSLASH@
@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
@am__fastdepCC_FALSE@	$(AM_V_CC@am__nodep@)$(COMPILE) -c -o $@ `$(CYGPATH_W) '$<'`

.c.lo:
@am__fastdepCC_TRUE@	$(AM_V_CC)depbase=`echo $@ | sed 's|[^/]*$$|$(DEPDIR)/&|;s|\.lo$$||'`;\
@am__fastdepCC_TRUE@	$(LTCOMPILE) -MT $@ -MD -MP -MF $$depbase.Tpo -c -o $@ $< &&\
@am__fastdepCC_TRUE@	$(am__mv) $$depbase.Tpo $$depbase.Plo
@AMDEP_TRUE@@am__fastdepCC_FALSE@	$(AM_V_CC)source='$<' object='$@' libtool=yes @AMDEPBACKSLASH@
@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
@am__fastdepCC_FALSE@	$(AM_V_CC@am__nodep@)$(LTCOMPILE) -c -o $@ $<

mostlyclean-libtool:
	-rm -f *.lo

clean-libtool:
	-rm -rf .libs _libs

# This directory's subdirectories are mostly independent; you can cd
# into them and run 'make' without going through this Makefile.
# To change the values of 'make' variables: instead of editing Makefiles,
# (1) if the variable is set in 'config.status', edit 'config.status'
#     (which will cause the Makefiles to be regenerated when you run 'make');
# (2) otherwise, pass the desired values on the 'make' command line.
$(am__recursive_targets):
	@fail=; \
	if $(am__make_keepgoing); then \
	  failcom='fail=yes'; \
	else \
	  failcom='exit 1'; \
	fi; \
	dot_seen=no; \
	target=`echo $@ | sed s/-recursive//`; \
	case "$@" in \
	  distclean-* | maintainer-clean-*) list='$(DIST_SUBDIRS)' ;; \
	  *) list='$(SUBDIRS)' ;; \
	esac; \
	for subdir in $$list; do \
	  echo "Making $$target in $$subdir"; \
	  if test "$$subdir" = "."; then \
	    dot_seen=yes; \
	    local_target="$$target-am"; \
	  else \
	    local_target="$$target"; \
	  fi; \
	  ($(am__cd) $$subdir && $(MAKE) $(AM_MAKEFLAGS) $$local_target) \
	  || eval $$failcom; \
	done; \
	if test "$$dot_seen" = "no"; then \
	  $(MAKE) $(AM_MAKEFLAGS) "$$target-am" || exit 1; \
	fi; test -z "$$fail"

ID: $(am__tagged_files)
	$(am__define_uniq_tagged_files); mkid -fID $$unique
tags: tags-recursive
TAGS: tags

tags-am: $(TAGS_DEPENDENCIES) $(am__tagged_files)
	set x; \
	here=`pwd`; \
	if ($(ETAGS) --etags-include --version) >/dev/null 2>&1; then \
	  include_option=--etags-include; \
	  empty_fix=.; \
	else \
	  include_option=--include; \
	  empty_fix=; \
	fi; \
	list='$(SUBDIRS)'; for subdir in $$list; do \
	  if test "$$subdir" = .; then :; else \
	    test ! -f $$subdir/TAGS || \
	      set "$$@" "$$include_option=$$here/$$subdir/TAGS"; \
	  fi; \
	done; \
	$(am__define_uniq_tagged_files); \
	shift; \
	if test -z "$(ETAGS_ARGS)$$*$$unique"; then :; else \
	  test -n "$$unique" || unique=$$empty_fix; \
	  if test $$# -gt 0; then \
	    $(ETAGS) $(ETAGSFLAGS) $(AM_ETAGSFLAGS) $(ETAGS_ARGS) \
	      "$$@" $$unique; \
	  else \
	    $(ETAGS) $(ETAGSFLAGS) $(AM_ETAGSFLAGS) $(ETAGS_ARGS) \
	      $$unique; \
	  fi; \
	fi
ctags: ctags-recursive

CTAGS: ctags
ctags-am: $(TAGS_DEPENDENCIES) $(am__tagged_files)
	$(am__define_uniq_tagged_files); \
	test -z "$(CTAGS_ARGS)$$unique" \
	  || $(CTAGS) $(CTAGSFLAGS) $(AM_CTAGSFLAGS) $(CTAGS_ARGS) \
	     $$unique

GTAGS:
	here=`$(am__cd) $(top_builddir) && pwd` \
	  && $(am__cd) $(top_srcdir) \
	  && gtags -i $(GTAGS_ARGS) "$$here"
cscopelist: cscopelist-recursive

cscopelist-am: $(am__tagged_files)
	list='$(am__tagged_files)'; \
	case "$(srcdir)" in \
	  [\\/]* | ?:[\\/]*) sdir="$(srcdir)" ;; \
	  *) sdir=$(subdir)/$(srcdir) ;; \
	esac; \
	for i in $$list; do \
	  if test -f "$$i"; then \
	    echo "$(subdir)/$$i"; \
	  else \
	    echo "$$sdir/$$i"; \
	  fi; \
	done >> $(top_builddir)/cscope.files

distclean-tags:
	-rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH tags

distdir: $(DISTFILES)
	@srcdirstrip=`echo "$(srcdir)" | sed 's/[].[^$$\\*]/\\\\&/g'`; \
	topsrcdirstrip=`echo "$(top_srcdir)" | sed 's/[].[^$$\\*]/\\\\&/g'`; \
	list='$(DISTFILES)'; \
	  dist_files=`for file in $$list; do echo $$file; done | \
	  sed -e "s|^$$srcdirstrip/||;t" \
	      -e "s|^$$topsrcdirstrip/|$(top_builddir)/|;t"`; \
	case $$dist_files in \
	  */*) $(MKDIR_P) `echo "$$dist_files" | \
			   sed '/\//!d;s|^|$(distdir)/|;s,/[^/]*$$,,' | \
			   sort -u` ;; \
	esac; \
	for file in $$dist_files; do \
	  if test -f $$file || test -d $$file; then d=.; else d=$(srcdir); fi; \
	  if test -d $$d/$$file; then \
	    dir=`echo "/$$file" | sed -e 's,/[^/]*$$,,'`; \
	    if test -d "$(distdir)/$$file"; then \
	      find "$(distdir)/$$file" -type d ! -perm -700 -exec chmod u+rwx {} \;; \
	    fi; \
	    if test -d $(srcdir)/$$file && test $$d != $(srcdir); then \
	      cp -fpR $(srcdir)/$$file "$(distdir)$$dir" || exit 1; \
	      find "$(distdir)/$$file" -type d ! -perm -700 -exec chmod u+rwx {} \;; \
	    fi; \
	    cp -fpR $$d/$$file "$(distdir)$$dir" || exit 1; \
	  else \
	    test -f "$(distdir)/$$file" \
	    || cp -p $$d/$$file "$(distdir)/$$file" \
	    || exit 1; \
	  fi; \
	done
	@list='$(DIST_SUBDIRS)'; for subdir in $$list; do \
	  if test "$$subdir" = .; then :; else \
	    $(am__make_dryrun) \
	      || test -d "$(distdir)/$$subdir" \
	      || $(MKDIR_P) "$(distdir)/$$subdir" \
	      || exit 1; \
	    dir1=$$subdir; dir2="$(distdir)/$$subdir"; \
	    $(am__relativize); \
	    new_distdir=$$reldir; \
	    dir1=$$subdir; dir2="$(top_distdir)"; \
	    $(am__relativize); \
	    new_top_distdir=$$reldir; \
	    echo " (cd $$subdir && $(MAKE) $(AM_MAKEFLAGS) top_distdir="$$new_top_distdir" distdir="$$new_distdir" \\"; \
	    echo "     am__remove_distdir=: am__skip_length_check=: am__skip_mode_fix=: distdir)"; \
	    ($(am__cd) $$subdir && \
	      $(MAKE) $(AM_MAKEFLAGS) \
	        top_distdir="$$new_top_distdir" \
	        distdir="$$new_distdir" \
		am__remove_distdir=: \
		am__skip_length_check=: \
		am__skip_mode_fix=: \
	        distdir) \
	      || exit 1; \
	  fi; \
	done
check-am: all-am
	$(MAKE) $(AM_MAKEFLAGS) check-local
check: check-recursive
all-am: Makefile $(PROGRAMS)
installdirs: installdirs-recursive
installdirs-am:
install: install-recursive
install-exec: install-exec-recursive
install-data: install-data-recursive
uninstall: uninstall-recursive

install-am: all-am
	@$(MAKE) $(AM_MAKEFLAGS) install-exec-am install-data-am

installcheck: installcheck-recursive
install-strip:
	if test -z '$(STRIP)'; then \
	  $(MAKE) $(AM_MAKEFLAGS) INSTALL_PROGRAM="$(INSTALL_STRIP_PROGRAM)" \
	    install_sh_PROGRAM="$(INSTALL_STRIP_PROGRAM)" INSTALL_STRIP_FLAG=-s \
	      install; \
	else \
	  $(MAKE) $(AM_MAKEFLAGS) INSTALL_PROGRAM="$(INSTALL_STRIP_PROGRAM)" \
	    install_sh_PROGRAM="$(INSTALL_STRIP_PROGRAM)" INSTALL_STRIP_FLAG=-s \
	    "INSTALL_PROGRAM_ENV=STRIPPROG='$(STRIP)'" install; \
	fi
mostlyclean-generic:

clean-generic:

distclean-generic:
	-test -z "$(CONFIG_CLEAN_FILES)" || rm -f $(CONFIG_CLEAN_FILES)
	-test . = "$(srcdir)" || test -z "$(CONFIG_CLEAN_VPATH_FILES)" || rm -f $(CONFIG_CLEAN_VPATH_FILES)

maintainer-clean-generic:
	@echo "This command is intended for maintainers to use"
	@echo "it deletes files that may require special tools to rebuild."
clean: clean-recursive

clean-am: clean-generic clean-libtool clean-local clean-noinstPROGRAMS \
	mostlyclean-am

distclean: distclean-recursive
	-rm -rf ./$(DEPDIR)
	-rm -f Makefile
distclean-am: clean-am distclean-compile distclean-generic \
	distclean-tags

dvi: dvi-recursive

dvi-am:

html: html-recursive

html-am:

info: info-recursive

info-am:

install-data-am:

install-dvi: install-dvi-recursive

install-dvi-am:

install-exec-am:

install-html: install-html-recursive

install-html-am:

install-info: install-info-recursive

install-info-am:

install-man:

install-pdf: install-pdf-recursive

install-pdf-am:

install-ps: install-ps-recursive

install-ps-am:

installcheck-am:

maintainer-clean: maintainer-clean-recursive
	-rm -rf ./$(DEPDIR)
	-rm -f Makefile
maintainer-clean-am: distclean-am maintainer-clean-generic

mostlyclean: mostlyclean-recursive

mostlyclean-am: mostlyclean-compile mostlyclean-generic \
	mostlyclean-libtool

pdf: pdf-recursive

pdf-am:

ps: ps-recursive

ps-am:

uninstall-am:

.MAKE: $(am__recursive_targets) check-am install-am install-strip

.PHONY: $(am__recursive_targets) CTAGS GTAGS TAGS all all-am check \
	check-am check-local clean clean-generic clean-libtool \
	clean-local clean-noinstPROGRAMS cscopelist-am ctags ctags-am \
	distclean distclean-compile distclean-generic \
	distclean-libtool distclean-tags distdir dvi dvi-am html \
	html-am info info-am install install-am install-data \
	install-data-am install-dvi install-dvi-am install-exec \
	install-exec-am install-html install-html-am install-info \
	install-info-am install-man install-pdf install-pdf-am \
	install-ps install-ps-am install-strip installcheck \
	installcheck-am installdirs installdirs-am maintainer-clean \
	maintainer-clean-generic mostlyclean mostlyclean-compile \
	mostlyclean-generic mostlyclean-libtool pdf pdf-am ps ps-am \
	tags tags-am uninstall uninstall-am

tkey.c: genpgp.h
tpgp.c: genpgp.h
genpgp.h: genpgp.sh
	-sh $< > $@
tssl.c: genssl.h
genssl.h: genssl.sh
	-touch $@
#	-sh $< > $@

.PHONY:	check-init
check-init: macros
	@echo "=== $@ ==="
	@rm -rf tmp/hrmib tmp/repackage
	@mkdir -p tmp/hrmib/ tmp/repackage/
	@${rpm} -v --version	> tmp/version
	@-diff -u tmp/version ref/version || cp tmp/version ref/version
	@${rpm} -v --querytags	> tmp/querytags
	@-diff -u tmp/querytags ref/querytags || cp tmp/querytags ref/querytags
	@${rpm} -v --showrc | sed -e "s,$(abs_top_builddir),..,g" > tmp/showrc
	@-diff -u tmp/showrc ref/showrc || cp tmp/showrc ref/showrc

$(POPTPKGS):
	${wget} $(POPTURI)$@

.PHONY:	check-pubkeys
check-pubkeys: tpgp thkp $(POPTPKGS)
	@echo "=== $@ ==="
	@${rm} -rf tmp/rpmdb
	@${mkdir} -p tmp/rpmdb/log tmp/rpmdb/tmp
	@${cp} ref/DB_CONFIG tmp/rpmdb
	@${rpm} --import tmp/DSA.pubpem
	@${rpm} --import tmp/RSA.pubpem
	@${echo} -n "--> default: HKP"
	@${thkp} > tmp/hkp || :
	@diff -u tmp/hkp ref/hkp || cp tmp/hkp ref/hkp
	@${tpgp}
	@${echo} -n "--> beecrypt: HKP"
	@${thkp} --usecrypto bc > /dev/null || :
	@${tpgp} --usecrypto bc
#	@${echo} -n "--> cdsa: HKP"
#	@-${thkp} --usecrypto cdsa > /dev/null || :
#	@-${tpgp} --usecrypto cdsa
	@${echo} -n "--> gcrypt: HKP"
	@-${thkp} --usecrypto gc > /dev/null 2>&1 || :
	@-${tpgp} --usecrypto gc
	@${echo} -n "--> tomcrypt: HKP"
	@-${thkp} --usecrypto ltc > /dev/null 2>&1 || :
	@-${tpgp} --usecrypto ltc
	@${echo} -n "--> nss: HKP"
	@-${thkp} --usecrypto nss > /dev/null || :
	@-${tpgp} --usecrypto nss
	@${echo} -n "--> openssl: HKP"
	@-${thkp} --usecrypto ssl > /dev/null || :
	@-${tpgp} --usecrypto ssl
	@${rpm} --import $(top_srcdir)/pubkeys/JBJ-GPG-KEY
	@${rpm} -Kv $(POPTPKGS) > tmp/popt.Kv
	@diff -u tmp/popt.Kv ref/popt.Kv
	@-${rpm} -Kvv --usecrypto bc   $(POPTPKGS) > /dev/null 2>&1
#	@-${rpm} -Kvv --usecrypto cdsa $(POPTPKGS) > /dev/null 2>&1
	@-${rpm} -Kvv --usecrypto gc   $(POPTPKGS) > /dev/null 2>&1
	@-${rpm} -Kvv --usecrypto ltc  $(POPTPKGS) > /dev/null 2>&1
	@-${rpm} -Kvv --usecrypto nss  $(POPTPKGS) > /dev/null 2>&1
	@-${rpm} -Kvv --usecrypto ssl  $(POPTPKGS) > /dev/null 2>&1
	@echo "=== $@ === done."

.PHONY:	check-sign
check-sign:
	@echo "=== $@ ==="
	@echo "--> DSA:"
	@${rpm} --delsign cudf-test/*.rpm > /dev/null
	@${rpm} -D'_gpg_name Donald' --addsign --nopassword cudf-test/*.rpm > /dev/null
	@${rpm} -qp cudf-test/*.rpm	> /dev/null
	@${rpm} -Kv cudf-test/*.rpm	> /dev/null
	@echo "--> RSA:"
	@${rpm} --delsign edos-test/*.rpm > /dev/null
	@${rpm} -D'_gpg_name Ronald' --addsign --nopassword edos-test/*.rpm > /dev/null
	@${rpm} -qp edos-test/*.rpm	> /dev/null
	@${rpm} -Kv edos-test/*.rpm	> /dev/null

.PHONY:	check-ssl
check-ssl: tssl
	@echo "=== $@ ==="

.PHONY:	check-markup
check-markup: $(POPTPKGS)
	@echo "=== $@ ==="
	@${rpm} -qp --qf '[%{*:yaml}\n]' popt*.rpm > tmp/popt.yaml
	@diff -u {tmp,ref}/popt.yaml
	@${rpm} -qp --qf '[%{*:xml}\n]' popt*.rpm > tmp/popt.xml
	@-diff -u {tmp,ref}/popt.xml

.PHONY: check-repo
check-repo: $(POPTPKGS)
	-rm -rf .repodata
	${vg} ${rpmrepo} --database --gzip .
	-${vg} ${rpmrepo} --database --bzip2 .
	-${vg} ${rpmrepo} --database --xz .
	-${vg} ${rpmrepo} --gzip .
	-${vg} ${rpmrepo} --bzip2 .
	-${vg} ${rpmrepo} --xz .
	${vg} ${rpmrepo} --uncompressed .
	@-diff -u repodata/primary.xml ref/primary.xml
	@-diff -u repodata/filelists.xml ref/filelists.xml
	@-diff -u repodata/other.xml ref/other.xml
# XXX repomd.xml always differs because st->st_ctime is used.
	@-diff -u repodata/repomd.xml ref/repomd.xml > /dev/null 2>&1

.PHONY:	check-macros
check-macros:
	@echo "=== $@ ==="
	@${rpm} -D 'foo bar' -E '%dump%trace%foo' > /dev/null 2>&1
	@${rpm} -D 'foo %foo' -E '%foo' > /dev/null 2>&1
	@${rpm} -D 'foo bing' -D 'foo bang' -D 'foo boom' -E '%{@foo}' > /dev/null 2>&1
	@${rpm}  -E '%(/bin/echo "-->       sh: Portable Shar!")'
	@-${rpm} -E '%{lua:print("-->      lua: Hard Rocks!")}'
	@-${rpm} -E '%{js:print("-->       js: Use GPSEE!")}'
	@-${rpm} -E '%{java:print("-->     java: Espresso Beans!");}'
	@-${rpm} -E '%{ruby:print "-->     ruby: Puppet Gems!"}'
	@-${rpm} -E '%{mruby:print "-->    mruby: Homebrew Suds!\n"}'
	@-${rpm} -E '%{tcl:puts "-->      tcl: Porticus Ports!"}'
	@-${rpm} -E '%{squirrel:print("--> squirrel: Eat Nuts!")}'
	@-${rpm} -E '%{perl:print "-->     perl: Artistic Scribbles!"}'
	@-${rpm} -E '%{python:print "-->   python: Snake Eggs!",}'
	@-${rpm} -E '%{ficl:.( -->     ficl: Das OpenBoot!)}'

check-srpm:
	if [ -f rpm.spec -a -f rpm/rpm-@PACKAGE_VERSION@.tar.gz -a -f rpm/cpu-os-macros.tar.gz ]; then \
	  ${rpm} -bs --nodeps rpm.spec && mv rpm/*.src.rpm . ; \
	fi

%.spec: $(wildcard %-*.src.rpm)
	@${rpm2cpio} $(wildcard $*-*.src.rpm) | ${cpio} -i --quiet $@

%.src.rpm: $(wildcard *.spec)
	@${rpm} -bs --nodeps $^

BUILD_DIRS ?= $(shell ${rpm} -qp --qf '%{NAME} ' $(wildcard *.src.rpm))

$(BUILD_DIRS): $(wildcard %-*.src.rpm)
	@echo "=== build $@ ==="
	${rpm} -i --nodeps $@-*.src.rpm
	(cd $@ && ${rpm} -q --specfile $@.spec && ${rpm} -q --specsrpm $@.spec && ${rpm} -q --specfile --specedit $@.spec && ${rpm} -bb --nodeps $@.spec || :) > /dev/null

define IGNORED_BY_GNU_MAKE:
.endif 

# neither .endif nor endef can be followed by a colon; each creates
# warnings or errors in one or other version of make. we need some
# magic to make them both work. Luckily, .endfor ignores the colon.

.for DUMMY in $(NO_SUCH_VARIABLE)
endef
.endfor :

check-build: $(BUILD_DIRS)
	@echo "=== $@ ==="
	@ls -1 */*.rpm | grep -v '^dir2symlink' > tmp/manifest
	@diff -u {tmp,ref}/manifest || ${cp} {tmp,ref}/manifest
	@rm -rf tmp/cachedb
	@${mkdir} -p tmp/cachedb/log tmp/cachedb/tmp
	@${cp} ref/DB_CONFIG tmp/cachedb
	@${rpmsolver} --import tmp/DSA.pubpem
	@${rpmsolver} --import tmp/RSA.pubpem
	@${rpmsolver} -i --justdb --nodeps edos-test/*.rpm
	@rm -rf tmp/hrmib tmp/repackage
	@mkdir -p tmp/hrmib/ tmp/repackage/
	@-${rpm} -e `${rpm} -qa | grep -v gpg-pubkey`
	@${rpm} -U -- edos-test/glass-1-*
	@${rpm} -U -- +car +turbo edos-test/{engine-1-*,wheel-2-*,door-1-*,window-0-*}
	@${rpm} -qaT | grep -v gpg-pubkey > tmp/edos.qa.1
	@diff -u {tmp,ref}/edos.qa.1 || ${cp} {tmp,ref}/edos.qa.1
	@${rpm} -U -- edos-test/engine-2-* -turbo
	@${rpm} -U -- edos-test/{wheel-3,tyre-1}-*
	@${rpm} -F -- edos-test/{door-2,window-1,glass-2}-*
	@${rpm} -qaT | grep -v gpg-pubkey > tmp/edos.qa.2
	@diff -u {tmp,ref}/edos.qa.2 || ${cp} {tmp,ref}/edos.qa.2
	@-${rpm} -e `${rpm} -qa | grep -v gpg-pubkey`

check-depsolver:
	@echo "=== $@ ==="
	@rm -rf tmp/solveA
	@${mkdir} -p tmp/solveA/log tmp/solveA/tmp
	@${cp} ref/DB_CONFIG tmp/solveA
	@${rpmsolverA} --import tmp/DSA.pubpem
	@${rpmsolverA} --import tmp/RSA.pubpem
	@${rpmsolverA} -i --justdb --nodeps edos-test/turbo-1* edos-test/wheel-2* edos-test/door-1*
	@rm -rf tmp/solveB
	@${mkdir} -p tmp/solveB/log tmp/solveB/tmp
	@${cp} ref/DB_CONFIG tmp/solveB
	@${rpmsolverB} --import tmp/DSA.pubpem
	@${rpmsolverB} --import tmp/RSA.pubpem
	@${rpmsolverB} -i --justdb --nodeps edos-test/engine-2*
	@rm -rf tmp/hrmib tmp/repackage
	@mkdir -p tmp/hrmib/ tmp/repackage/
	@-${rpm} -e `${rpm} -qa | grep -v gpg-pubkey`
	@${rpm} -U edos-test/car-1-*
	@${rpm} -qa
	@-${rpm} -e `${rpm} -qa | grep -v gpg-pubkey`

check-poky:
	@echo "=== $@ ==="
	@rm -rf tmp/solveA tmp/solveB tmp/solveC
	${poky_solverA} $(poky_pkgsdirA)/*.rpm
	${poky_solverB} $(poky_pkgsdirB)/*.rpm
	${poky_solverC} $(poky_pkgsdirC)/*.rpm
	@rm -rf tmp/hrmib tmp/repackage
	@mkdir -p tmp/hrmib/ tmp/repackage/
	find $(poky_pkgsdirA) $(poky_pkgsdirB) $(poky_pkgsdirC) -name '*.rpm' | sort -u > poky_manifest
	-for F in `cat poky_manifest`; do \
	    echo "-----> " $$F; \
	    ${rpm} -U --justdb --noscripts --notriggers --noparentdirs --nolinktos --stats $$F || : ; \
	    ${rpm} -Va --nofiles --noaid --noparentdirs --nolinktos || : ; \
	    ${rpm} -e --justdb --nodeps --noscripts --notriggers `${rpm} -qa | grep -v gpg-pubkey` || : ; \
	done

check-ACID:
	@echo "=== $@ ==="
	@${db_upgrade} Packages > /dev/null 2>&1
	@${db_checkpoint} -1	> /dev/null 2>&1
	@${rpm} -U ref/edos.manifest
	@${db_dump} Packages | ${db_load} Packages-NEW
	@${db_verify} Packages-NEW > /dev/null 2>&1
	@rm $(rpmdb)/Packages-NEW
	@${db_verify} Packages > /dev/null 2>&1
	@${db_stat} -CA	> /dev/null 2>&1
	@rm -f $(rpmdb)/Nvra
	@${rpm} -q tyre > /dev/null 2>&1
	@[ -f $(rpmdb)/Nvra ] || echo "NACK: Nvra not re-created!"
	@rm -f $(rpmdb)/Conflictname
	@${rpm} -q --whatconflicts tyre > /dev/null 2>&1
	@[ -f $(rpmdb)/Conflictname ] || echo "NACK: Conflictname not re-created!"
	@rm -f $(rpmdb_Tables)
	@${db_recover} -e
	@${rpm} -e car engine wheel door tyre window glass
	@${db_printlog} -r	> /dev/null 2>&1
	@${db_checkpoint} -1	> /dev/null 2>&1
	@${db_archive} -d

check-install:
	@echo "=== $@ ==="
	${rpm} -U --relocate /tmp/=$(testdir)/tmp/root/ --nodeps devtool-sanity/*.rpm
	${rpm} -U probes-test/probes-2*.rpm

manifests:
	@echo "=== $@ ==="
	@for D in ${DISTROS}; do \
	  rm -f $${D}/manifest; \
	  make $${D}/manifest; \
	done

.PRECIOUS: %/manifest
%/manifest:
	@echo "=== $@ ==="
	@mkdir -p $(@D)
	@if [ ! -f $@ ]; then \
	  rm -f ${@D}/uri; \
	  for U in ${$(@D)_uri}; do echo "$${U}" >> ${@D}/uri; done; \
	  if [ -z "${${@D}_manifest}" ]; \
	    then ${find} ${$(@D)_uri} -maxdepth 1 | grep 'rpm$$' > $@; \
	    else grep -v '^#' ${${@D}_manifest} > $@; \
	  fi; \
	  ./spew ${@D} > ${@D}/distros.mongo; \
	  ls -l ${@D}/uri $@ ${@D}/distros.mongo; \
	fi

.PRECIOUS: %/RPMS
%/RPMS: %/manifest
	@echo "=== $@ ==="
	@if [ ! -d $@ ]; then \
	  mkdir -p $@; \
	  echo "==> Download $@ ..."; \
	  case $(@D) in \
	  G)		$(cp) `cat ${G_manifest}` $@ ;; \
	  IDMS)		$(ln) -s ${XXXIDMS}/* $@ ;; \
	  OWL2)		$(ln) -s ${XXXOWL2}/* $@ ;; \
	  OWL3)		$(ln) -s ${XXXOWL3}/* $@ ;; \
	  ALT51)	$(ln) -s ${XXXALT51}/* $@ ;; \
	  CM15) $(cp) $$(cat $< | sed -e 's,^.*/\(media/[^/]*/release/[^/]*\)/,${XXXCM15}\1,') $@ ;; \
	  CM14)	$(cp) $$(cat $< | sed -e 's,^.*/,${XXXCM14}/,') $@ ;; \
	  MAG2011) $(cp) $$(cat $< | sed -e 's,^.*/,${XXXMAG2011},') $@ ;; \
	  UL) $(cp) $$(cat $< | sed -e 's,^.*/\([^/]*\)/,${XXXUL2011}/\1/,') $@ ;; \
	  MDV2011) $(cp) $$(cat $<) $@ ;; \
	  MDV2010) $(cp) $$(cat $< | sed -e 's,^.*/,${XXXMDV2010}/,') $@ ;; \
	  MDV2009) $(cp) $$(cat $< | sed -e 's,^.*/,${XXXMDV2009}/,') $@ ;; \
	  *)		cd $@ && ${wget} -c -i $(testdir)/$(@D)/manifest ;; \
	  esac; \
	fi

.PRECIOUS: %/todo
%/todo: %/RPMS
	@echo "=== $@ ==="
	@if [ ! -f $@ ]; \
	  then ${find} $< -name '*.rpm' | sort -u > $@; \
	fi

.PRECIOUS: %/json
%/json: %/RPMS
	@echo "=== $@ ==="
	@rm -f ${@D}/export
	@echo "`${now}` ==> ${@D}: Exporting ..." | tee -a ${@D}/export
	for F in $</*.rpm; do \
	  echo "--> $$F"; \
	  ${rpm} -qp --json $$F | tee -a $@ | ${mongo} ${mongoserver}/${@D} > /dev/null; \
	done
	@echo "`${now}` <== ${@D}: Exported." | tee -a ${@D}/export

.PRECIOUS: %/repodata
%/repodata: %/RPMS
	@echo "=== $@ ==="
	@rm -f ${@D}/generate
#	-rm -f ${@D}/repodata
	@echo "`${now}` ==> ${@D}: Generating ..." | tee -a ${@D}/generate
	${rpmrepo} --uncompressed --database --stats ${@D} 2>&1 | tee -a ${@D}/generate
	@ls -al ${@D}/repodata
	@echo "`${now}` <== ${@D}: Generated." | tee -a ${@D}/generate

#	  -D '_dbi_tags Packages:Name:Nvra:Providename:Dirnames:Basenames:Filepaths'

.PRECIOUS: %/solve
%/solve: %/todo
	@echo "=== $@ ==="
	@rm -f ${@D}/import
	@echo "`${now}` ==> ${@D}: Creating ..." | tee -a ${@D}/import
	@mkdir -p $@/log $@/tmp
	@${cp} $(testdir)/ref/DB_CONFIG $@
	@echo "`${now}` <== ${@D}: Created." | tee -a ${@D}/import
	@echo "`${now}` ==> ${@D}: Importing ..." | tee -a ${@D}/import
	@-${rpm} -i -D '_dbpath ${@D}/solve' --justdb --stats \
	  -D '_hrmib_path %{nil}' \
	  -D '__dbi_txn create nofsync lock log mpool txn auto_commit thread thread_count=64' \
	  --noaid --ignoresize --nodeps --noorder \
	  $< \
	  2>&1 | tee -a ${@D}/import
	ls -al ${@D}/solve
	@echo "`${now}` <== ${@D}: Imported." | tee -a ${@D}/import

%/digests: %/RPMS
	@echo "=== $@ ==="
	@rm -f $@
	@touch $@

%/sha256 %/sha224 %/sha384 %/sha512 %/md5 %/sha1: %/digests
	@echo "=== $@ ==="
	@-(echo "`${now}` ==> ${@D}: Generating ..."; \
	  ${rpmdigest} --${@F} ${@D}/RPMS > ${@D}/${@F} 2>&1; \
	  echo "`${now}` <== ${@D}: Generated."; \
	  ls -l ${@D}/${@F}; \
	) | tee -a ${@D}/digests

%/mtree: %/sha256
	@echo "=== $@ ==="
	@-(echo "`${now}` ==> ${@D}: Generating ..."; \
	  (${mtree} -c -p ${@D}/RPMS | tee ${@D}/mtree | ${mtree} -p ${@D}/RPMS) 2>&1; \
	  echo "`${now}` <== ${@D}: Generated."; \
	  ls -l ${@D}/mtree; \
	) | tee -a ${@D}/digests

Digest-%: %/mtree
	@echo "=== $@ ==="

Install-%: %/solve
	@echo "=== $@ ==="
	@rm -f $(<D)/install
	@echo "`$(now)` ==> ${<D}: Installing ..." | tee -a $(<D)/install
	@${sudo} rm -rf $(<D)/ROOT
	@cat -n $(<D)/todo | sort -R | cut -f2- > $(<D)/todo.random
	@mkdir -p $(<D)/ROOT/var/lib/rpm/log $(<D)/ROOT/var/lib/rpm/tmp
	@${cp} $(testdir)/ref/DB_CONFIG $(<D)/ROOT/var/lib/rpm
	@-mkdir -p $(<D)/ROOT/proc && sudo mount -o bind /proc $(<D)/ROOT/proc
#	@-mkdir -p $(<D)/ROOT/sys  && ${sudo} mount -o bind /sys $(<D)/ROOT/sys 
#	@-mkdir -p $(<D)/ROOT/dev/pts
#	@-${sudo} mount -o bind /dev $(<D)/ROOT/dev
#	@-${sudo} mount -o bind /dev/pts $(<D)/ROOT/dev/pts
	@-${sudo} ${rpm} -Uvh --stats --nofdigests \
	  -r $(testdir)/$(<D)/ROOT \
	  -D '__dbi_txn create nofsync lock log mpool txn auto_commit thread thread_count=64' \
	  -D '_dbpath /var/lib/rpm' \
	  -D '_hrmib_path /var/cache/hrmib/%{___NVRA}' \
	  -D '_solve_A $(<D)/solve' \
	  --noparentdirs --nolinktos \
	  $(<D)/todo.random 2>&1 | tee -a $(<D)/install
	-${sudo} rm -f $(<D)/ROOT/var/lib/rpm/Filepaths
	-${sudo} ${rpm} -qf /bin/sh --stats \
	  -D '_dbpath $(testdir)/$(<D)/ROOT/var/lib/rpm'
	-${sudo} rm -f $(<D)/ROOT/var/lib/rpm/Providename
	-${sudo} ${rpm} -q --whatprovides kernel  --stats \
	  -D '_dbpath $(testdir)/$(<D)/ROOT/var/lib/rpm'
	-${sudo} ${rpm} -Va --nofiles --noaid --stats \
	  -D '_dbpath $(testdir)/$(<D)/ROOT/var/lib/rpm' \
	  --noparentdirs --nolinktos \
	  2>&1 | tee -a $(<D)/install
#	@-${sudo} umount $(<D)/ROOT/dev/pts
#	@-${sudo} umount $(<D)/ROOT/dev
#	@-${sudo} umount $(<D)/ROOT/sys 
	@-${sudo} umount $(<D)/ROOT/proc
#	@rm -f $(<D)/todo.random
	@echo "`$(now)` <== $(<D): Installed." | tee -a $(<D)/install
	@-${sudo} rm -rf tmp/solveA tmp/solveB tmp/solveC
	@-[ -d $(<D)/ROOT/tmp/.private ] && ${sudo} $(chattr) -a $(<D)/ROOT/tmp/.private
	@-${sudo} rm -rf $(<D)/ROOT/
	@-./spew $(<D) > $(<D)/install.mongo
#	@-${mongo} ${mongoserver} < ${<D}/install.mongo

Verify-%: %/solve
	@echo "=== $@ ==="
	rm -f $(<D)/verify
	@echo "`$(now)` ==> ${<D}: Verifying ..." | tee -a $(<D)/verify
	@-for F in `cat $(<D)/todo`; do \
	  [ -d $(<D)/VROOT/tmp/.private ] && ${sudo} $(chattr) -a $(<D)/VROOT/tmp/.private ; \
	  ${sudo} rm -rf $(<D)/VROOT; \
	  mkdir -p $(<D)/VROOT/var/lib/rpm/log $(<D)/VROOT/var/lib/rpm/tmp; \
	  ${cp} $(testdir)/ref/DB_CONFIG $(<D)/VROOT/var/lib/rpm; \
	  echo "-----> " $$F; \
	  ${sudo} ${rpm} -Uv --nofdigests --stats \
	    -r $(testdir)/$(<D)/VROOT \
	    -D '_dbpath /var/lib/rpm' \
	    -D '_hrmib_path /var/cache/hrmib/%{___NVRA}' \
	    -D "_solve_dbpath $(testdir)/$(<D)/solve" \
	    --noparentdirs --nolinktos \
	    $$F \
	  2>&1 || : ; \
	  ${rpm} -Va --nofiles --noaid --stats \
	    -D '_dbpath $(testdir)/$(<D)/VROOT/var/lib/rpm' \
	    --noparentdirs --nolinktos \
	  2>&1 || : ; \
	  ${sudo} ${rpm} -e --stats \
	    -r $(testdir)/$(<D)/VROOT \
	    -D '_dbpath /var/lib/rpm' \
	    -D '_hrmib_path /var/cache/hrmib/%{___NVRA}' \
	    -D '_repackage_all_erasures 0' \
	    `${sudo} ${rpm} -D '_dbpath $(testdir)/$(<D)/VROOT/var/lib/rpm' -qa` \
	  2>&1 || : ; \
	  [ -d $(<D)/VROOT/tmp/.private ] && ${sudo} $(chattr) -a $(<D)/VROOT/tmp/.private ; \
	  ${sudo} rm -rf $(<D)/VROOT/ ; \
	done | tee -a $(<D)/verify
	@echo "`$(now)` <== ${<D}: Verified." | tee -a $(<D)/verify
	@-${sudo} rm -rf tmp/solveA tmp/solveB tmp/solveC
.PHONY:	check-triggers
check-triggers:
	@echo "=== $@ ==="
	@-${rpm} -e --noscripts --notriggers --allmatches '^triggers-.*' > /dev/null 2>&1
	@echo "--> N:"
	@${rpm} -U ${TUopts} triggers-N/triggers-N*.rpm
	@${rpm} -e ${TEopts} triggers-N-a triggers-N-b
	@echo "--> NA:"
	@${rpm} -U ${TUopts} triggers-NA/triggers-NA*.rpm
	@${rpm} -e ${TEopts} triggers-NA-a triggers-NA-b
	@echo "--> P:"
	@${rpm} -U ${TUopts} triggers-P/triggers-P*.rpm
	@${rpm} -e ${TEopts} triggers-P-a triggers-P-b
	@echo "--> F:"
	@${rpm} -U ${TUopts} triggers-F/triggers-F*.rpm
	@${rpm} -e ${TEopts} triggers-F-a triggers-F-b
	@echo "--> FP:"
	@${rpm} -U ${TUopts} triggers-FP/triggers-FP*.rpm
	@${rpm} -e ${TEopts} triggers-FP-a triggers-FP-b
	@echo "--> D:"
	@${rpm} -U ${TUopts} triggers-D/triggers-D*.rpm
	@${rpm} -e ${TEopts} triggers-D-a triggers-D-b
	@echo "--> DP:"
	@${rpm} -U ${TUopts} triggers-DP/triggers-DP*.rpm
	@${rpm} -e ${TEopts} triggers-DP-a triggers-DP-b

check-query:
	@echo "=== $@ ==="
#XXX	@${rpm} -qW . > /dev/null 2>&1
	@${rpm} -qa > /dev/null
	@${rpm} -qa 'arch=noarch' > /dev/null
	@${rpm} -qa 'arch=!noarch' > /dev/null
	@${rpm} -qa -c > /dev/null
	@${rpm} -qa -d > /dev/null
	@${rpm} -qa -s > /dev/null
	@${rpm} -qa --dump > /dev/null
	@${rpm} -q --querybynumber 1 > /dev/null
	@${rpm} -qal > /dev/null
	@${rpm} -qalv > /dev/null
	@${rpm} -qa --qf '%{INSTALLTIME} %{INSTALLTIME:date} %{INSTALLTIME:day} %{INSTALLTIME:dec} %{INSTALLTIME:hex} %{INSTALLTIME:oct}\n' > /dev/null
	@${rpm} -qa --qf '%{DBINSTANCE} %{HDRID} %{PKGID} %{SOURCEPKGID}\n' > /dev/null
	@${rpm} -qa --qf '%{PACKAGESIZE:rpn(511,+,512,/)}\n' > /dev/null
	@${rpm} -qa --qf '%{PACKAGESTAT:base64}\n' > /dev/null
	@${rpm} -qa --qf '%{PACKAGESTAT:stat(atime,ctime,blksize,blocks,dev,gid,gname,ino,link,mode,mtime,nlink,rdev,size,uid,uname)}\n' > /dev/null
	@${rpm} -qa --qf '[%{SUGGESTS}\n]' > /dev/null
	@${rpm} -qa --qf '[%{providesqlentry}\n] [%{requiresqlentry}\n] [%{conflictsqlentry}\n] [%{obsoletesqlentry}\n] [%{filessqlentry1}\n] [%{filessqlentry2}\n]' > /dev/null
	@${rpm} -qa --qf '[%{FILENAMES:shescape}: %{FILEMTIMES:shescape} %{FILEFLAGS:perms} %{FILEMODES:fflags}\n]' > /dev/null
	@${rpm} -qa --qf '[%{FILENAMES}: %{FILECLASS}\n]' > /dev/null
	@${rpm} -qa --qf '[%{FILEPATHS}: %{FILECONTEXTS}\n]' > /dev/null
	@${rpm} -qa --qf '[%{FILENAMES}: %{FSCONTEXTS}\n]' > /dev/null
	@${rpm} -qa --qf '[%{FILENAMES}: %{RECONTEXTS}\n]' > /dev/null
	@${rpm} -qa --qf '[%{FILENAMES}: %{FILEPROVIDE}\n]' > /dev/null
	@${rpm} -qa --qf '[%{FILENAMES}: %{FILEREQUIRE}\n]' > /dev/null
	@${rpm} -qa --qf '[%{FSNAMES}: %{FSSIZES}\n]' > /dev/null

check-rpmv3:
	@echo "=== $@ ==="
	@${rpm} -qlp simplestRPMv3-1.0-2.aix5.3.noarch.rpm

check-verify:
	@echo "=== $@ ==="
	@-${rpm} -e probes devtool-sanity
	@-${rpm} -U --justdb --nodeps tmp/manifest
	@-${rpm} -V probes devtool-sanity > /dev/null
	@-${rpm} -Va > /dev/null
#XXX	@-${rpm} -Vp tmp/manifest
	@-${rpm} -e --noscripts --notriggers --allmatches '^triggers-.*'
	@-${rpm} -e car engine wheel door tyre window glass
	@-${rpm} -e battery bicycle electric-engine gasoline-engine
	@-${rpm} -e solar-collector tire turbo
	@-${rpm} -e --justdb popt
	@-${rpm} -e probes
	@-${rpm} -e devtool-sanity

check-tools:
	@echo "=== $@ ==="
	@-${find} $(POPTURI) -type f -maxdepth 1 > tmp/find
	@-mkdir -p tmp/wget && ${wget} -i tmp/find -P tmp/wget > /dev/null 2>&1
	-mkdir -p tmp/cp && ${cp} -R $(POPTURI) tmp/cp
	-diff -ru tmp/{wget,cp}
	@-${grep} -i HREF $(POPTURI) > tmp/grep

check-sql:
	@echo "=== $@ ==="
	@echo "--> sqlite3:"
	@-${rpm} -e --nodeps --noscripts sql-test
	@rm -rf tmp/sqldb*
	@-${sqlite3} -echo tmp/sqldb ".read ref/sqldb-basic.sql" >& tmp/sqldb-basic.out
	@-diff -u {tmp,ref}/sqldb-basic.out || cp {tmp,ref}/sqldb-basic.out
	@echo "--> rpmsql STRING:"
	@rm -rf tmp/sqldb*
	@-${rpmsql} -echo tmp/sqldb ".read ref/sqldb-basic.sql" >& tmp/sqldb-basic.out
	@-diff -u {tmp,ref}/sqldb-basic.out
	@echo "--> rpmsql STDIN:"
	@rm -rf tmp/sqldb*
	@-${rpmsql} -echo tmp/sqldb < ref/sqldb-basic.sql >& tmp/sqldb-basic.out
	@-diff -u {tmp,ref}/sqldb-basic.out
	@echo "--> rpmsql FILE:"
	@rm -rf tmp/sqldb*
	@-${rpmsql} -echo tmp/sqldb `pwd`/ref/sqldb-basic.sql >& tmp/sqldb-basic.out
	@-diff -u {tmp,ref}/sqldb-basic.out
	@echo "--> rpmsql INTERACTIVE:"
	@rm -rf tmp/sqldb*
	@-echo ".read ref/sqldb-basic.sql" | ${rpmsql} -echo tmp/sqldb >& tmp/sqldb-basic.out
	@-diff -u {tmp,ref}/sqldb-basic.out
	@echo "--> rpm %{sql:...} macro:"
	@rm -rf tmp/sqldb*
	@-${rpm} -E '%{sql -echo tmp/sqldb:.read ref/sqldb-basic.sql}' >& tmp/sqldb-basic.out
	@-diff -u {tmp,ref}/sqldb-basic.out
	@rm -rf tmp/sqldb*
	@echo "--> rpm %post -p <sql> scriptlet:"
	@-${rpm} -U ${Uopts} sql-test/sql-test*.noarch.rpm
	@echo "--> rpm %preun -p <sql> scriptlet:"
	@-${rpm} -e ${Eopts} sql-test 2>&1

check-gsr:
	@echo "=== $@ ==="
	@-${gsr} -c 'print("-->       js: Use GPSEE!")'
	@-${gsr} -f gpsee/gffi.js

check-convert:
	@echo "=== $@ ==="
	case `rpm --version` in \
	*5.4*|*5.3*) echo "Nothing to do." ;; \
	*)	echo "Converting system database."; \
		rm -rf newdb olddb; \
		mkdir -p olddb; \
		echo "--> copy the system rpmdb"; \
		cp /var/lib/rpm/Packages olddb; \
		echo "--> rebuild to renumber the header instances"; \
		rpm \
		  --dbpath $(testdir)/olddb \
		  --rebuilddb; \
		mkdir -p newdb/log newdb/tmp olddb; \
		echo "--> convert header instances to network order"; \
		@__DB_DUMP@ olddb/Packages \
		  | sed \
		    -e 's/^type=hash$$/type=btree/' \
		    -e '/^h_nelem=/d' \
		    -e 's/^ \(..\)\(..\)\(..\)\(..\)$$/ \4\3\2\1/' \
		  | @__DB_LOAD@ newdb/Packages; \
		echo "--> regenerate the indices"; \
		cp ../rpmdb/DB_CONFIG newdb; \
		${rpm} \
		  --dbpath $(testdir)/newdb \
		  --rebuilddb -vv; \
		ls -l newdb; \
		echo "--> test the conversion"; \
		${rpm} --dbpath $(testdir)/newdb -qa; \
		${rpm} --dbpath $(testdir)/newdb -q rpm; \
		;; \
	esac

check-lua:
	@echo "=== $@ ==="
	@-${rpm} -E '%{lua:print("-->      lua: Hard Rocks!")}'
	@-${rpm} -E '%{lua}'
	@-${rpm} -e lua-test
	@-${rpm} -U lua-test/lua-test-*.noarch.rpm
	@-${rpm} -e lua-test
check-dir2symlink:
	@echo "=== $@ ==="
	@-for i in ${INTERPRETERS}; do \
	  ${echo} "--- $$i ---" ; \
	  ${rpm} -e --noscripts \
	    dir2symlink-$${i} || : ; \
	  ${rpm} -U --noparentdirs \
	    dir2symlink/dir2symlink-$${i}-1-1.noarch.rpm ; \
	  ls -l /tmp/$${i}.d ; \
	  ${rpm} -U --noparentdirs \
	    dir2symlink/dir2symlink-$${i}-2-1.noarch.rpm ; \
	  ls -l /tmp/$${i}.d /tmp/.$${i}.d/* ; \
	  ${rpm} -e \
	    dir2symlink-$${i} ; \
	  ls -l /tmp/.$${i}.d /tmp/$${i}.d || : ; \
	done
	@echo ""

check-perl:
	@echo "=== $@ ==="
	-../libtool --mode=execute vg ${rpm} -E '%{perl:print "-->     perl: Artistic Scribbles!"}'

check-git:
	@echo "=== $@ ==="
	@rm -rf ${gitdir} tmp/git.out
	@mkdir -p ${gitdir}
@WITH_LIBGIT2_TRUE@	@${echo} -n "--> rpmgit:"
@WITH_LIBGIT2_TRUE@	@if test ! -f $${HOME}/.gitconfig; then \
@WITH_LIBGIT2_TRUE@	  { echo "[user]"; \
@WITH_LIBGIT2_TRUE@	    echo "	email = someone@nowhere.org"; \
@WITH_LIBGIT2_TRUE@	    echo "	name = Jack Spratt"; \
@WITH_LIBGIT2_TRUE@	    echo "[color]"; \
@WITH_LIBGIT2_TRUE@	    echo "	ui = auto"; \
@WITH_LIBGIT2_TRUE@	  } > $${HOME}/.gitconfig; \
@WITH_LIBGIT2_TRUE@	fi 
@WITH_LIBGIT2_TRUE@	@${echo} -n " init"
@WITH_LIBGIT2_TRUE@	@${tgit} init --initial-commit >> tmp/git.out
@WITH_LIBGIT2_TRUE@	@-(cd ${gitdir} && ${git} log --stat 2>&1) >> tmp/git.out
@WITH_LIBGIT2_TRUE@	@${echo} -n " add"
@WITH_LIBGIT2_TRUE@	@mkdir -p ${gitdir}/bar ${gitdir}/bing/bang
@WITH_LIBGIT2_TRUE@	@${echo} "foo" > ${gitdir}/foo
@WITH_LIBGIT2_TRUE@	@${echo} "bar/baz" > ${gitdir}/bar/baz
@WITH_LIBGIT2_TRUE@	@${echo} "bing/bang/boom" > ${gitdir}/bing/bang/boom
@WITH_LIBGIT2_TRUE@	@${tgit} add foo bar/baz bing/bang/boom	
@WITH_LIBGIT2_TRUE@	@-(cd ${gitdir} && ${git} log --stat 2>&1) >> tmp/git.out
@WITH_LIBGIT2_TRUE@	@${echo} -n " commit"
@WITH_LIBGIT2_TRUE@	@${tgit} commit -m "RPM add commit"
@WITH_LIBGIT2_TRUE@	@-(cd ${gitdir} && ${git} log --stat 2>&1) >> tmp/git.out
@WITH_LIBGIT2_TRUE@	@${echo} -n " modify"
@WITH_LIBGIT2_TRUE@	@cp ${gitdir}/foo ${gitdir}/bar/baz
@WITH_LIBGIT2_TRUE@	@-(cd ${gitdir} && ${git} log --stat 2>&1) >> tmp/git.out
@WITH_LIBGIT2_TRUE@	@${tgit} diff
@WITH_LIBGIT2_TRUE@	@${tgit} commit -a -m "RPM modify commit"
@WITH_LIBGIT2_TRUE@	@-(cd ${gitdir} && ${git} log --stat 2>&1) >> tmp/git.out
@WITH_LIBGIT2_TRUE@	@${echo}  " checkout(NOTYET)"
@WITH_LIBGIT2_TRUE@	@echo "FOO" > ${gitdir}/foo
@WITH_LIBGIT2_TRUE@	@rm -f ${gitdir}/bar/baz ${gitdir}/bing/bang/boom
@WITH_LIBGIT2_TRUE@	@${tgit} diff
@WITH_LIBGIT2_TRUE@	@${git} checkout foo bar/baz bing/bang/boom	# XXX
@WITH_LIBGIT2_TRUE@	@${tgit} diff
@WITH_LIBGIT2_TRUE@	@ls -1 ${gitdir}/foo ${gitdir}/bar/baz ${gitdir}/bing/bang/boom
@WITH_LIBGIT2_TRUE@	@-(cd ${gitdir} && ${git} log --stat 2>&1) >> tmp/git.out
@WITH_LIBGIT2_TRUE@	@${echo} ""
@WITH_LIBGIT2_TRUE@	@-diff -u tmp/git.out ref/git.out || cp tmp/git.out ref/git.out
@WITH_LIBGIT2_TRUE@	@${tgit} blame foo
@WITH_LIBGIT2_TRUE@	@${tgit} status --long
@WITH_LIBGIT2_TRUE@	@${tgit} log

check-js:
	@echo "=== $@ ==="
	-../libtool --mode=execute vg ${rpm} -E '%{js:print("yadda-yadda")}'

check-odbc:
	@echo "=== $@ ==="
	@rm -f tmp/odbc.out
	@-(${todbc} ${odbc_uri_mysql} 2>&1) >> tmp/odbc.out
	@-(${todbc} ${odbc_uri_postgres} 2>&1) >> tmp/odbc.out
	@-diff -u tmp/odbc.out ref/odbc.out || cp tmp/odbc.out ref/odbc.out

test:	check-init \
	check-pubkeys \
	check-markup \
	check-macros \
	check-build \
	check-sign \
	check-ACID \
	check-install \
	check-query \
	check-verify \
	check-rpmv3 \
	check-triggers \
	check-tools \
	check-sql \
	check-dir2symlink \
	check-lua \
	check-git \
	check-git
#	check-convert
#	check-repo

check-local: check-init

clean-local:
	rm -f genpgp.h genssl.h
	$(sudo) rm -rf */ROOT tmp/repackage tmp/solve*
	rm -rf tmp $(BUILD_DIRS)
	rm -rf repodata/

# Tell versions [3.59,3.63) of GNU make to not export all variables.
# Otherwise a system limit (for SysV at least) may be exceeded.
.NOEXPORT:
